[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Statistical inference with weights and survey design variables",
    "section": "",
    "text": "Introduction\nThis guide discusses the practical steps required to produce reliable population estimates with survey data curated by the UK Data Service. It focuses on how and when to use survey weights and design variables, and is aimed at users unfamiliar with the technical aspects of sample theory and survey design.\nRobust ie reliable population inference is a complex topic\nPopulation inference from survey data requires drawing from four domains: statistical theory (sampling distributions, parameter estimation, design effects, weighting), study-specific design issues (stratification, clustering, non-response), software estimation procedures and functions (inconsistent implementation, unclear documentation), and the secondary researcher/user’s own sets of circumstances (ie what they can hope to produce given available data and time/resources constraints).\nTeaching gaps\nProducing weighted survey estimates is routinely excluded from introductory methods courses due to time constraints, resource limitations, and perceived complexity. This leaves researchers and analysts with significant knowledge gaps in their survey analysis skills.\nProblematic Research Practices\nThis gap potentially results in two problematic outcomes. Some users may be tempted to rely on undocumented, “quick and dirty” approaches to population inference, sometimes not giving enough consideration to whether techniques are methodologically appropriate to the data and their research aims. Others avoid working with survey datasets entirely, believing they lack necessary skills. Both responses limit effective use of valuable social research infrastructure.\nPurpose of these guidelines\nThe guidelines below attempt to address these challenges by documenting plain English procedures for robust population inference using surveys microdata available at the UK Data Service. It relies on examples from the Labour Force Survey, Family Expenditure Survey, and British Social Attitudes survey with examples in R, Stata and SPSS. The aim is enabling confident implementation of robust estimation strategies regardless of mathematical background.\n\n\n\n\n\nflowchart TD\n    A[Target Population] --&gt; B[Survey Sample]\n    B --&gt; C{Raw Data Analysis}\n    B --&gt; D{Weighted Analysis}\n    \n    C --&gt; E[Biased Estimates]\n    D --&gt; F[Robust Estimates]\n    \n    G[Survey Design Effects] --&gt; H[Survey Weights]\n    I[Non-response] --&gt; H\n    J[Coverage Errors] --&gt; H\n    \n    H --&gt; D\n    K[Design Variables] --&gt; D\n    \n    E --&gt; L[❌ Unreliable Inference]\n    F --&gt; M[✅ Valid Inference]\n    \n    style A fill:#e1f5fe\n    style F fill:#c8e6c9\n    style E fill:#ffcdd2\n    style M fill:#c8e6c9\n    style L fill:#ffcdd2\n\n\n Flowchart: robust population inference \n\n\n\n\n\n\n\nBlair, Johnny. 2014. Designing Surveys : A Guide to Decisions and Procedures. 3rd edition / Johnny Blair, Ronald F. Czaja, Edward A. Blair. Los Angeles: SAGE.\n\n\nDWP. 2014. “Uncertainty in Family Resources Survey-Based Analysis. Guidance on Estimating Uncertainty in Family Resources Survey-Based Analysis.” Edited by Department for Work and Pensions. 2014. https://www.gov.uk/government/publications/uncertainty-in-family-resources-survey-based-analysis.\n\n\nIBM Support. 2020. “Inconsistency in the Output When Using Weighting Procedure. IBM Support Document Number 419449.” 2020. https://www.ibm.com/support/pages/inconsistency-output-when-using-weighting-procedure.\n\n\nKish, Leslie. 1995. Survey Sampling. Wiley Classics Library. New York: Wiley.\n\n\nLohr, Sharon L. 2019 - 2010. Sampling : Design and Analysis. Second edition. Texts in Statistical Science. Boca Raton, FL: CRC Press.\n\n\nLumley, Thomas. 2023. “Survey: Analysis of Complex Survey Samples.”\n\n\nONS. 2022. “Family Resources Survey, 2020/21 Methodology and Standard Error Tables.” Edited by Office for National Statistics. 2022. https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/1065513/Ch1_Methodology_and_Standard_Errors.ods.\n\n\nP, Curran. 2016. “Complex Survey Designs and Weighting Using Stata: Part 1-3.” 2016. https://www.youtube.com/watch?v=oOpJdC_oeKY.\n\n\nUKDS. 2018. “Data Skills Modules: Applying Weights to Survey Data.” Edited by UK Data Service. 2018. https://www.youtube.com/watch?v=TIad5__WP8g.\n\n\n———. 2019. “Weights in Social Surveys: An Introduction:” Edited by UK Data Service. 2019. https://www.youtube.com/watch?v=Vllr4olp3N4&t=39s.\n\n\nWallrich, Lukas. 2019. “Week 7 Using Survey Weights in r.” Edited by Goldsmiths Core Quantitative Methods Series. 2019. https://www.youtube.com/watch?v=brxx81U6N1o.",
    "crumbs": [
      "Introduction"
    ]
  },
  {
    "objectID": "01_Basics.html",
    "href": "01_Basics.html",
    "title": "1  Basics of Survey Design",
    "section": "",
    "text": "1.1 Clustering in Survey Sampling\nAt the heart of survey design is how we choose who takes part in the survey - this is known as sampling. There are two main approaches: probability sampling, where individuals are chosen at random and everyone in the population has a known (non-zero) chance of being selected, and non-probability sampling, where people are selected in a more informal or purposive way - such as when internet users choose to take part in an online poll.\nProbability sampling is preferred in social research because it reduces the risk of getting a biased or unrepresentative sample. For example, if some groups in the population are under-represented or left out completely, the survey results will not reflect the wider population. Textbooks often refer to simple random sampling - where individuals are picked entirely at random from a full list (or sampling frame) of the population - as the ideal method for ensuring accurate and unbiased estimates.\nHowever, simple random sampling is rarely possible in large-scale, real-world surveys. This can be because some countries, including the UK, don’t have a complete national population register that researchers can use as a a sampling frame to list every individual. Instead, other forms of sampling are used. These might involve selecting households, addresses, schools, or other units where reliable lists exist.\nMoreover, simple random sampling is not always the most efficient method. In some cases, certain groups in the population may be less likely to respond to surveys, or the research may need more precise data about specific sub-groups. In such cases, it makes sense to over-sample these groups to ensure the results are meaningful.\nDesigning a survey is all about finding the right balance: one want the sample to be representative and large enough for precise results, but one also needs to keep costs down. For that reason, most large social surveys in the UK use more complex sampling methods than simple random sampling. For instance, to ensure good representation across the UK, surveys often take separate samples for England, Scotland, Wales, and Northern Ireland. If the goal is to produce reliable estimates for particular groups - such as ethnic minorities - those groups may also be deliberately over-sampled.\nTwo common techniques used in complex survey designs are clustering and stratification.\nClustering is a common technique in survey design, especially in large-scale studies. Its usage implies multistage sampling, which means selecting sample units in two or more steps rather than all at once.\nInstead of sampling individuals directly, the population is first grouped into clusters small groups that are each a kind of ‘mini-population’. These clusters are chosen so that they are as diverse as possible internally, meaning that each one looks like a small version of the full population. A sample of these clusters is then randomly selected, and others are left out. Later stages of sampling take place within the selected clusters.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Basics of Survey Design</span>"
    ]
  },
  {
    "objectID": "01_Basics.html#clustering-in-survey-sampling",
    "href": "01_Basics.html#clustering-in-survey-sampling",
    "title": "1  Basics of Survey Design",
    "section": "",
    "text": "1.1.1 Clustering in the UK Context\nIn Great Britain, there is no national population register listing all individuals. The best available alternative is a list of addresses maintained by Royal Mail, called the Postcode Address File (PAF). In Northern Ireland, the equivalent is the list provided by the Land and Property Services Agency (LPSA).\nThe PAF contains addresses (also called “delivery points”) but doesn’t tell us how many people or households live at each one. So we can’t use it for simple random sampling of individuals or households. However, it is well suited for geographic clustering.\nFor example:\n\nEvery address is part of a postcode (e.g. M13 9PL),\nWhich belongs to a postcode sector (e.g. M13 9),\nWhich in turn is part of a postcode district (e.g. M13).\n\nIn many UK surveys, postcode sectors or districts are used as Primary Sampling Units (PSUs) - the first level at which random selection happens. This approach helps keep fieldwork practical and affordable by limiting travel distances and interviewer time.\n\n\n\n\nFigure 1: Example of Two-Stage Cluster Sampling\n\n\nIn Figure 1, the population is grouped into four postcode districts. Districts 1 and 4 are randomly selected as the Primary Sampling Units (PSUs). In the second stage, addresses are randomly selected within these chosen districts. Because only some districts are selected, the final addresses are clustered within them. Later stages might involve sampling households or individuals from those addresses.\nThis design is common in UK household surveys, where geography plays a big role in cost and logistics.\n\n\n\n1.1.2 Clustering at the Household Level\nClustering can also happen within households. For example, some UK household surveys (like the Labour Force Survey) include all individuals in a selected household.\nImagine we want to estimate the proportion of people born outside the UK. If we select individuals completely at random across the whole population, we might get a very accurate estimate. But if we sample whole households, the result could be less precise.\nHere’s why: people born outside the UK often live together. So in your sample, you might get:\n\nSome households with only UK-born people,\nSome with only overseas-born,\nA few mixed.\n\nThat means the sample might over- or under-represent certain groups just by chance.\n\n1.1.2.1 Example:\ne.g.\nHousehold 1: 1 UK born individuals \nHousehold 2: 3 UK born \nHousehold 3: 2 Overseas born \nHousehold 4: 6 UK born \nHousehold 5: 1 Overseas born, 1 UK born \nHousehold 6: 2 UK born \nHousehold 7: 1 UK born \nHousehold 8: 1 UK born \nHousehold 9: 5 Overseas born \nHousehold 10: 3 UK born \nIf we sampled only 1 in every 10 households, this clustering would make our estimate of the UK-born proportion less precise than if individuals were selected randomly from across the population.\n\n\n\n\n1.1.3 Trade-offs of Clustering\nClustering makes sampling more practical and cost-effective—but it comes with a trade-off: reduced precision. Because we are leaving out clusters from the population we are sampling from, we are making it ‘coarser’, and are capturing less overall diversity. This means estimates based on clustered data are generally less precise and may need larger sample sizes or other adjustments to compensate.\nWe’ll return to this idea when we discuss how to account for clustering in data analysis.\n\n\n\n\n\n\nflowchart TD\n    A[FULL POPULATION] --&gt; B[Grouped into clusters &lt;br/&gt;e.g. postcode districts]   \n    B --&gt; C[Sampling of clusters &lt;br/&gt;Primary Sampling Units]  \n    C --&gt; D[Further sampling:  &lt;br/&gt;households, individuals]\n\n\n Visual Summary: Clustering in Survey Sampling \n\n\n\nKey Points to Remember:\n\nClustering simplifies data collection but reduces precision.\nIt is often combined with multistage sampling.\nHousehold-level clustering also affects estimates.\nAlways account for clustering during analysis to avoid misleading results.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Basics of Survey Design</span>"
    ]
  },
  {
    "objectID": "01_Basics.html#stratification",
    "href": "01_Basics.html#stratification",
    "title": "1  Basics of Survey Design",
    "section": "1.2 Stratification",
    "text": "1.2 Stratification\nStratification is another important technique used in survey sampling. It involves dividing the population into different groups - called strata - and then selecting a sample from each group. This ensures that important subgroups are properly represented in the final sample, even if they are small or harder to reach.\n\n1.2.1 How is stratification different from clustering?\nIn clustering, each selected group (such as a postcode district) is a mini version of the population - as it is designed to be internally diverse. In stratification, the groups are made to be as homogeneous as possible - people in each stratum share certain traits (like age or location), and this helps make groups comparisons more precise.\n\n\n1.2.2 Example: Stratification by Region\nImagine we split the population into four regions: North, South, East, and West. From each region, we randomly select a fixed number of addresses - say, five from each. This ensures every region is covered in the sample, no matter how small or different it is.\nFigure 2 shows how samples are drawn evenly across regional strata.\n\n\n\nFigure 2: An example of stratified sampling\n\n\n\n\n1.2.3 Stratification in UK Social Surveys\nStrata in UK surveys are often based on:\n\nGeographic areas, such as Government Office Regions\nSocio-economic characteristics, like car ownership or job types in an area\nDemographic traits, such as the number of pensioners or the area’s population density\n\nThis information usually comes from Census data, which provides a detailed picture of the population across the country.\n\n\n1.2.4 Why Use Stratification?\nStratification is especially useful when:\n\nSome groups in the population are small but important (e.g. ethnic minorities, rural areas, younger people)\nOne needs to improve estimates precision - by reducing variation within each group\nOne needs reliable results for every group, not just for the population overall\n\nBy making sure each group is adequately represented, stratification helps improve the accuracy and representativeness of survey estimates",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Basics of Survey Design</span>"
    ]
  },
  {
    "objectID": "01_Basics.html#proportionate-vs-disproportionate-sampling",
    "href": "01_Basics.html#proportionate-vs-disproportionate-sampling",
    "title": "1  Basics of Survey Design",
    "section": "1.3 Proportionate vs disproportionate sampling",
    "text": "1.3 Proportionate vs disproportionate sampling\nIn simple random sampling, every person (or unit) in the population has the same chance of being selected. This means that the sampling fraction—the proportion of the population included in the sample—is calculated as:\n\\[\n  \\text{Sampling fraction} = \\frac{n}{N}\n\\]\nWhere:\n\n\\(n\\) = sample size\n\\(N\\) = population size\n\n\n1.3.1 Proportionate Stratified Sampling\nWhen the same sampling fraction is used in each strata, we call it proportionate stratification. That means:\n\\[\n  \\frac{n_h}{N_h} = \\frac{n}{N}\n\\]\nWhere:\n\n\\(n_h\\) = number of people sampled in stratum \\(h\\)\n\\(N_h\\) = total number of people in stratum \\(h\\)\n\nThis method ensures that each group is represented in proportion to its size in the population.\n\n\n\n1.3.2 Disproportionate Stratified Sampling\nSometimes, researchers deliberately over-sample certain groups. This is called disproportionate stratification - when the sampling fraction is larger in some strata than others.\nThis is useful when:\n\nThe group is small but important for the study (e.g. ethnic minorities, people in rural areas)\nMore data is needed to analyse that group accurately\n\nExample: In the British Election Study 2010, people from ethnic minority backgrounds were over-sampled. This was done because there was limited data on their voting behaviour, and researchers needed enough cases to draw valid conclusions.\n\n\n\n\n\nBlair, Johnny. 2014. Designing Surveys : A Guide to Decisions and Procedures. 3rd edition / Johnny Blair, Ronald F. Czaja, Edward A. Blair. Los Angeles: SAGE.\n\n\nDWP. 2014. “Uncertainty in Family Resources Survey-Based Analysis. Guidance on Estimating Uncertainty in Family Resources Survey-Based Analysis.” Edited by Department for Work and Pensions. 2014. https://www.gov.uk/government/publications/uncertainty-in-family-resources-survey-based-analysis.\n\n\nIBM Support. 2020. “Inconsistency in the Output When Using Weighting Procedure. IBM Support Document Number 419449.” 2020. https://www.ibm.com/support/pages/inconsistency-output-when-using-weighting-procedure.\n\n\nKish, Leslie. 1995. Survey Sampling. Wiley Classics Library. New York: Wiley.\n\n\nLohr, Sharon L. 2019 - 2010. Sampling : Design and Analysis. Second edition. Texts in Statistical Science. Boca Raton, FL: CRC Press.\n\n\nLumley, Thomas. 2023. “Survey: Analysis of Complex Survey Samples.”\n\n\nONS. 2022. “Family Resources Survey, 2020/21 Methodology and Standard Error Tables.” Edited by Office for National Statistics. 2022. https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/1065513/Ch1_Methodology_and_Standard_Errors.ods.\n\n\nP, Curran. 2016. “Complex Survey Designs and Weighting Using Stata: Part 1-3.” 2016. https://www.youtube.com/watch?v=oOpJdC_oeKY.\n\n\nUKDS. 2018. “Data Skills Modules: Applying Weights to Survey Data.” Edited by UK Data Service. 2018. https://www.youtube.com/watch?v=TIad5__WP8g.\n\n\n———. 2019. “Weights in Social Surveys: An Introduction:” Edited by UK Data Service. 2019. https://www.youtube.com/watch?v=Vllr4olp3N4&t=39s.\n\n\nWallrich, Lukas. 2019. “Week 7 Using Survey Weights in r.” Edited by Goldsmiths Core Quantitative Methods Series. 2019. https://www.youtube.com/watch?v=brxx81U6N1o.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Basics of Survey Design</span>"
    ]
  },
  {
    "objectID": "02_Design-Based_Inference.html",
    "href": "02_Design-Based_Inference.html",
    "title": "2  Design-Based Inference",
    "section": "",
    "text": "2.1 Survey Design Variables\nConducting inference from surveys involves estimating population parameters (like means or medians) sometimes also called point estimates and measuring their precision (e.g. confidence intervals or standard errors). Both the estimates and their precision can be affected by the sampling design.\nBecause most surveys combine these methods, the impact on precision depends on what is being estimated and for which subgroup.\nThere are two main ways to produce design-adjusted population estimates:\nThis guide focuses on the design-based approach, which is more straightforward for estimating means, medians, and totals.\nSurvey weights are special variables in survey datasets. Roughly speaking, they indicate how many people or units each observation represents in the population. Weights are usually:\nSurvey weights are usually made up of three components:\nThese components are often combined into a single weight variable. When weights are scaled to population totals, they are sometimes called grossing weights.\nHow are weights computed?\nSurvey designers use calibration algorithms to adjust the distribution of observations so they match known population totals across variables like age, gender, and employment. The goal is to:\nSurvey design variables usually include:\nWhen used alongside survey weights, design variables allow analysts to produce more accurate estimates using survey-specific functions in statistical software. When they are not included, most statistical software will compute standard errors/confidence intervals based on the incorrect assumption of simple random sampling.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Design-Based Inference</span>"
    ]
  },
  {
    "objectID": "02_Design-Based_Inference.html#survey-design-variables",
    "href": "02_Design-Based_Inference.html#survey-design-variables",
    "title": "2  Design-Based Inference",
    "section": "",
    "text": "Higher for people less likely to be sampled (e.g. young men in cities)\nLower for people more likely to be sampled (e.g. older women)\n\n\n\nDesign weight: adjusts for unequal selection probabilities.\nNon-response weight: corrects for groups with lower response rates.\nCalibration weight: aligns the sample with population estimates (e.g. by age, sex, or region from census data).\n\n\n\nThe value of a weight shows how many people in the population the observation stands for.\n\n\n\n\n\nKeep standard errors low by avoiding small sample sizes in cells\nImprove representativeness across key categories\n\n\n\n\nStrata identifiers\nCluster identifiers, especially the Primary Sampling Units (PSUs)\n\n\n\nNote: While most UK Data Service datasets include survey weights, not all provide design variables due to data protection concerns.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Design-Based Inference</span>"
    ]
  },
  {
    "objectID": "02_Design-Based_Inference.html#design-effects-and-design-factors",
    "href": "02_Design-Based_Inference.html#design-effects-and-design-factors",
    "title": "2  Design-Based Inference",
    "section": "2.2 Design Effects and Design Factors",
    "text": "2.2 Design Effects and Design Factors\nWhen survey design variables are missing, users can still account for complex sampling using:\n\nDesign effects (DEFF or \\(D_{eff}\\))\nDesign factors (\\(D_{eft}\\))\n\nThese measure how much the standard error of an estimate differs from what it would be under simple random sampling (SRS) (Kish 1995), and are sometimes published by data producers.\n\n### Definitions\n\nThe Design effect (\\(D_{eff}\\)) is the ratio of the actual variance of an estimate to the variance under SRS:\n\n\\(D_{eff} =\\frac{Var_{design}(\\hat{\\theta})}{Var_{SRS}(\\hat{\\theta})}\\)\n\nThe Design factor (\\(D_eft\\)) is the square root of the design effect:\n\n\\(D_{eft} = \\sqrt{D_{eff}}\\)\n\n### Interpretation\n\nIf \\(D_{eff} &lt; 1\\): the sample design improves precision.\nIf \\(D_{eff} &gt; 1\\): the sample design reduces precision.\n\nData providers sometimes include estimates of \\(D_{eff}\\) or \\(D_{eft}\\) so users can adjust standard errors or confidence intervals that were incorrectly computed under SRS assumptions.\n\n\n\n\n\nBlair, Johnny. 2014. Designing Surveys : A Guide to Decisions and Procedures. 3rd edition / Johnny Blair, Ronald F. Czaja, Edward A. Blair. Los Angeles: SAGE.\n\n\nDWP. 2014. “Uncertainty in Family Resources Survey-Based Analysis. Guidance on Estimating Uncertainty in Family Resources Survey-Based Analysis.” Edited by Department for Work and Pensions. 2014. https://www.gov.uk/government/publications/uncertainty-in-family-resources-survey-based-analysis.\n\n\nIBM Support. 2020. “Inconsistency in the Output When Using Weighting Procedure. IBM Support Document Number 419449.” 2020. https://www.ibm.com/support/pages/inconsistency-output-when-using-weighting-procedure.\n\n\nKish, Leslie. 1995. Survey Sampling. Wiley Classics Library. New York: Wiley.\n\n\nLohr, Sharon L. 2019 - 2010. Sampling : Design and Analysis. Second edition. Texts in Statistical Science. Boca Raton, FL: CRC Press.\n\n\nLumley, Thomas. 2023. “Survey: Analysis of Complex Survey Samples.”\n\n\nONS. 2022. “Family Resources Survey, 2020/21 Methodology and Standard Error Tables.” Edited by Office for National Statistics. 2022. https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/1065513/Ch1_Methodology_and_Standard_Errors.ods.\n\n\nP, Curran. 2016. “Complex Survey Designs and Weighting Using Stata: Part 1-3.” 2016. https://www.youtube.com/watch?v=oOpJdC_oeKY.\n\n\nUKDS. 2018. “Data Skills Modules: Applying Weights to Survey Data.” Edited by UK Data Service. 2018. https://www.youtube.com/watch?v=TIad5__WP8g.\n\n\n———. 2019. “Weights in Social Surveys: An Introduction:” Edited by UK Data Service. 2019. https://www.youtube.com/watch?v=Vllr4olp3N4&t=39s.\n\n\nWallrich, Lukas. 2019. “Week 7 Using Survey Weights in r.” Edited by Goldsmiths Core Quantitative Methods Series. 2019. https://www.youtube.com/watch?v=brxx81U6N1o.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Design-Based Inference</span>"
    ]
  },
  {
    "objectID": "03_Real_world.html",
    "href": "03_Real_world.html",
    "title": "3  Real world population inference: things to keep in mind",
    "section": "",
    "text": "3.1 Data Availability\nThe best way to estimate population characteristics from surveys requires using both survey weights and survey design variables. However, this is not always possible. In real-world research, trade-offs often need to be made depending on the circumstances. Below are some key considerations.\nMost datasets provided by the UK Data Service (UKDS) are available as Safeguarded data provided under the End User Licence (EUL). This makes access easier for many users, with minimal formalities. However, a key limitation is that survey design variables are often not included as data producers sometimes leave them out due to concerns about the perceived risk of personal information disclosure.\nSome datasets do include design variables. Notable examples are:\nWith certain large scale government surveys – such as the Labour Force Survey and the Family Resources Survey, users may apply for access to a version of the data that does include survey design information via the SecureLab or at the UKDS Safe Room.\nHowever, applying for access to these facilities can be time-consuming and may not be practical for all researchers, especially those outside academia or large organisations. More information on Types of data access can be found on the UK Data Service website.\nMany surveys also do not offer this kind of controlled access at all. As a result, users of these datasets may be limited in the level of precision they can achieve when producing estimates.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Real world population inference: things to keep in mind</span>"
    ]
  },
  {
    "objectID": "03_Real_world.html#data-availability",
    "href": "03_Real_world.html#data-availability",
    "title": "3  Real world population inference: things to keep in mind",
    "section": "",
    "text": "Understanding Society\nThe Health Survey for England\nThe British National Surveys of Sexual Attitudes and Lifestyles (NATSAL)\n\nThe British Social Attitudes Survey does also include survey design variables in some of its releases.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Real world population inference: things to keep in mind</span>"
    ]
  },
  {
    "objectID": "03_Real_world.html#sensitivity-of-the-analysis",
    "href": "03_Real_world.html#sensitivity-of-the-analysis",
    "title": "3  Real world population inference: things to keep in mind",
    "section": "3.2 Sensitivity of the analysis",
    "text": "3.2 Sensitivity of the analysis\nNot every analysis needs to be highly precise. It’s important to think about the purpose of your analysis and what is actually at stake. This will help you decide whether it’s necessary to use the most robust estimation method available or whether a simpler approach that is ‘good enough’ is acceptable.\nSurvey analysis can be thought of as existing on a spectrum:\n\nAt one end: casual data exploration or examples for teaching, where rough estimates are fine.\nAt the other end: research that will be published or inform policy, where precision is crucial.\n\nFor official statistics or academic publications, robust estimation methods should be used. But for less formal uses, it may be enough to produce rough estimates or a general idea of the likely range.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Real world population inference: things to keep in mind</span>"
    ]
  },
  {
    "objectID": "03_Real_world.html#complexity-of-the-analysis",
    "href": "03_Real_world.html#complexity-of-the-analysis",
    "title": "3  Real world population inference: things to keep in mind",
    "section": "3.3 Complexity of the analysis",
    "text": "3.3 Complexity of the analysis\nThe complexity of your analysis will also affect whether how crucial it is to use survey design variables.\nFor example:\n\nAnalyses based on small sample sizes are more likely to produce misleading results if design variables are ignored.\nSubgroup analysis (also known as domain estimation) requires more advanced techniques. This is because the weighting must reflect the whole population, not just the subgroup.\n\nAgain, think of analysis as a spectrum:\n\nAt one end: simple descriptive statistics involving the full population.\nAt the other: complex analyses of small subgroups or multivariate models.\n\nSimple descriptive work, especially if it involves a large sample size is more forgiving. However, detailed subgroup or multivariate analysis benefits significantly from the use of design variables as estimates are likely to be less precise.\nIn some cases, the estimates you need may already have been published by the data producer using appropriate methods. In other cases, the data producer may supply design factors—pre-calculated numbers to help adjust standard errors when design variables are not available.\nExamples are available below for the Labour Force Survey and the Family Resources Survey.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Real world population inference: things to keep in mind</span>"
    ]
  },
  {
    "objectID": "03_Real_world.html#software-issues",
    "href": "03_Real_world.html#software-issues",
    "title": "3  Real world population inference: things to keep in mind",
    "section": "3.4 Software issues",
    "text": "3.4 Software issues\nMost statistical software supports survey data analysis for population inference:\n\nR has the survey package\nSPSS offers the Complex Samples module\nStata uses the svy: prefix for survey commands\n\nHowever, all major packages also allow weights to be applied directly without accounting for survey design. Using weights without specifying the survey design can lead to problems.\n\n3.4.1 Common issues with direct/on the fly weighting:\n\nPoint estimates (like means or proportions) will usually be correct.\nBut standard errors and confidence intervals will often be incorrect because by default the software assumes that the data was collected simple random sampling.\nThis can lead to over- or under-estimation of variability—especially when analysing small subgroups.\nSome software, like SPSS and SAS, calculate standard errors using population totals instead of sample totals when using direct weighting. This can lead to completely incorrect confidence intervals and significance tests.\n\nOther software, like Stata, won’t allow confidence intervals or weights to be used correctly unless you use the proper survey commands. This can push users to use ‘quick and dirty’ shortcuts that give correct-looking point estimates but incorrect measures of precision.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Real world population inference: things to keep in mind</span>"
    ]
  },
  {
    "objectID": "03_Real_world.html#what-are-we-actually-estimating",
    "href": "03_Real_world.html#what-are-we-actually-estimating",
    "title": "3  Real world population inference: things to keep in mind",
    "section": "3.5 What are we actually estimating?",
    "text": "3.5 What are we actually estimating?\nIt’s easy to focus mainly on producing point estimates – single values like the average income, a poverty rate, or a regression coefficient. These also tend to be preferred when communicating results to non expert audiences or the media with estimates of their precision a secondary consideration, or a mere qualifier of the point estimate.\nBut it’s important not to treat these values as absolute truths.\n\nPoint estimates can be at the same time representative and imprecise, and therefore have little practical meaning.\nDifferent surveys will give different estimates, for example depending on when, and where data was collected.\n\nFocusing too much on a single “true” number as the goal of the analysis is misleading. Population parameters are not fixed values – they vary naturally. Instead, we should think in terms of a range of plausible values, with a stated level of confidence.\nThis approach:\n\nReflects the reality of survey-based research\nEmphasises that precision matters\nHighlights the importance of design-based estimation\n\nWhenever possible, try to report confidence intervals alongside or even instead point estimates. This will help you – and your audience – understand the uncertainty that comes with any population estimate, and why survey design often plays an important role in getting it right.\n\n\n\n\n\nflowchart TD\n\nA[What Are We Estimating?] --&gt; B[Point Estimate]\nB --&gt; C[Easy to Misinterpret]\n\nA --&gt; D[Confidence Interval]\nD --&gt; E[Reflects Uncertainty]\nE --&gt; F[More Accurate Picture]\n\nG[Focus on CI + Point Estimate] --&gt; H[Better Inference]\n\n\n\n\n\n\n\n\n\n\nBlair, Johnny. 2014. Designing Surveys : A Guide to Decisions and Procedures. 3rd edition / Johnny Blair, Ronald F. Czaja, Edward A. Blair. Los Angeles: SAGE.\n\n\nDWP. 2014. “Uncertainty in Family Resources Survey-Based Analysis. Guidance on Estimating Uncertainty in Family Resources Survey-Based Analysis.” Edited by Department for Work and Pensions. 2014. https://www.gov.uk/government/publications/uncertainty-in-family-resources-survey-based-analysis.\n\n\nIBM Support. 2020. “Inconsistency in the Output When Using Weighting Procedure. IBM Support Document Number 419449.” 2020. https://www.ibm.com/support/pages/inconsistency-output-when-using-weighting-procedure.\n\n\nKish, Leslie. 1995. Survey Sampling. Wiley Classics Library. New York: Wiley.\n\n\nLohr, Sharon L. 2019 - 2010. Sampling : Design and Analysis. Second edition. Texts in Statistical Science. Boca Raton, FL: CRC Press.\n\n\nLumley, Thomas. 2023. “Survey: Analysis of Complex Survey Samples.”\n\n\nONS. 2022. “Family Resources Survey, 2020/21 Methodology and Standard Error Tables.” Edited by Office for National Statistics. 2022. https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/1065513/Ch1_Methodology_and_Standard_Errors.ods.\n\n\nP, Curran. 2016. “Complex Survey Designs and Weighting Using Stata: Part 1-3.” 2016. https://www.youtube.com/watch?v=oOpJdC_oeKY.\n\n\nUKDS. 2018. “Data Skills Modules: Applying Weights to Survey Data.” Edited by UK Data Service. 2018. https://www.youtube.com/watch?v=TIad5__WP8g.\n\n\n———. 2019. “Weights in Social Surveys: An Introduction:” Edited by UK Data Service. 2019. https://www.youtube.com/watch?v=Vllr4olp3N4&t=39s.\n\n\nWallrich, Lukas. 2019. “Week 7 Using Survey Weights in r.” Edited by Goldsmiths Core Quantitative Methods Series. 2019. https://www.youtube.com/watch?v=brxx81U6N1o.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Real world population inference: things to keep in mind</span>"
    ]
  },
  {
    "objectID": "04_Statistical_Inference.html",
    "href": "04_Statistical_Inference.html",
    "title": "4  Statistical Inference from Survey Data in Practice",
    "section": "",
    "text": "4.1 Recommended Strategies\nThis section provides practical recommendations for making robust inferences from survey data, taking into account the factors highlighted in Section 3.\nIn practice, there are four main strategies you can follow when estimating population parameters from survey data. They are listed below in the order recommended by the UK Data Service:\nflowchart TD\nA[Survey weights &lt;br&gt; present in the data?] --&gt;|Yes| B[Survey design variables &lt;br&gt; present in the data?]\nA --&gt;|No| G[Strategy 4 &lt;br&gt; Unweighted estimation  &lt;br&gt; *Sample description only*]\nB --&gt;|Yes| C[Strategy 1  &lt;br&gt;Weights + design vars  &lt;br&gt; with survey commands]\nB --&gt;|No| D[Strategy 2  &lt;br&gt; Weights only  &lt;br&gt; with survey commands]\nD --&gt; E[Check if design effects  &lt;br&gt; are available  &lt;br&gt; to adjust precision]\nD --&gt;|Low sensitivity analysis| F[Strategy 3 &lt;br&gt; Use weighted   &lt;br&gt; standard commands]\n\n\n Flowchart: Choosing the right estimation strategy",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Statistical Inference from Survey Data in Practice</span>"
    ]
  },
  {
    "objectID": "04_Statistical_Inference.html#recommended-strategies",
    "href": "04_Statistical_Inference.html#recommended-strategies",
    "title": "4  Statistical Inference from Survey Data in Practice",
    "section": "",
    "text": "Strategy 1: The most robust approach is to use both weights and survey design variables with survey-specific commands. This should always be the first choice. In practice, though, design variables may not be available, or access to them may require applying for special versions of the data, which can be time-consuming.\nStrategy 2: If design variables are not available, the next best option is to use weights with survey-specific commands. Point estimates will be the same as in Strategy 1, but confidence intervals and standard errors may be biased (too narrow or too wide depending on the design). In these cases, it is important to acknowledge the limitation in reporting results. Sometimes, design effects provided in the documentation can help correct standard errors.\nStrategy 3: Some users apply weights in standard commands (e.g. weighted means or regressions without survey commands). This often gives correct point estimates but can produce misleading confidence intervals or standard errors. In SAS and SPSS the values may be entirely incorrect, while in R and Stata they may sometimes be close to those obtained with Strategy 2. This approach should only be used for low-sensitivity analyses. Design factors (if published) can sometimes be used to improve these results.\nStrategy 4: Unweighted estimation is strongly discouraged for inference, as the results will almost always be unreliable. It is only acceptable for descriptive or teaching purposes where precision is not the focus.",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Statistical Inference from Survey Data in Practice</span>"
    ]
  },
  {
    "objectID": "04_Statistical_Inference.html#medium-to-high-sensitivity-analysis-workflow",
    "href": "04_Statistical_Inference.html#medium-to-high-sensitivity-analysis-workflow",
    "title": "4  Statistical Inference from Survey Data in Practice",
    "section": "4.2 Medium to high sensitivity analysis: workflow",
    "text": "4.2 Medium to high sensitivity analysis: workflow\nIn most cases, researchers need not only point estimates but also measures of precision, such as confidence intervals or standard errors. The correct estimation of these depends on how much survey design information is available.\n\n4.2.1 If survey design variables are available\n\nIdentify relevant weights and design variables (see data documentation)\nDeclare the design in your software using survey commands\nEstimate your statistics using survey functions\nReport the confidence intervals (or standard errors with point estimates)\nDiscuss possible sources of bias (e.g. under/over-estimation of precision)\n\n\n\n4.2.2 If design variables are not in the safeguarded (EUL) dataset but are available in controlled access datasets**\n\nConsider whether applying for SecureLab access is worth the time and effort given the sensitivity / importance of the project\nInformation about applying of SecureLab access is available on the UKDS website\n\n\n\n\n\n\nflowchart TD\nB[Check documentation: &lt;br&gt; are design variables available &lt;br/&gt; in a controlled dataset?]\nB --&gt;|Yes| C[Cost–benefit assessment:&lt;br/&gt;time, feasibility, &lt;br/&gt; sensitivity of outputs]\nC --&gt;|Apply| D[Apply for access: write &lt;br/&gt; application, take the &lt;br/&gt; accredited researcher training]\nD --&gt; E[On approval: &lt;br/&gt; Strategy 1]\nC --&gt;|Do not apply| F[Proceed without design vars &lt;br/&gt; → follow 4.3.3]\nB --&gt;|No| F[Proceed without design vars &lt;br/&gt; → follow 4.3.3]\n\n\n\n\n\n\n\n\n4.2.3 If design variables are not available at all\n\nCheck whether the data producer has already published the estimates you need\nUse the available weights and declare a simple random sampling design in your software\nProduce estimates with survey-specific commands\nAdjust for bias using published design effects if available\nIf no design effects exist, report likely sources of bias (e.g. underestimation with clustering, overestimation with stratification)\nBe cautious with small sub-samples; consider only strong confidence levels when computing test and/or confidence intervals (ie \\(p&lt;.001\\))\n\n\n\n\n\n\nflowchart TD\nA[Start] --&gt; B[Has the producer already &lt;br/&gt; published the estimates?]\nB --&gt;|Yes| C[Use official estimates &lt;br/&gt; with proper attribution]\nB --&gt;|No| D[Identify available weights +&lt;br/&gt; design notes in docs]\nD --&gt; E[Declare SRS in software + &lt;br/&gt; use survey commands &lt;br/&gt; where possible]\nE --&gt; F[Produce estimates: &lt;br/&gt; point + naive precision]\nF --&gt; G[Adjust precision using &lt;br/&gt; published Design Effects &lt;br/&gt; if available]\nG --&gt; H[Report CIs/SEs and &lt;br/&gt; explicitly state likely bias&lt;br/&gt; clustering: underestimation &lt;br/&gt;stratified data: overestimation]\nH --&gt; I[For small sub-samples: &lt;br/&gt; use stricter significance level;&lt;br/&gt;emphasise exploratory status]\n\n\n\n\n\n\n\n\n4.2.4 For subpopulation (domain) estimates\n\nExtra care is needed when analysing subsets (e.g. employed people, ethnic groups)\nDomain estimation requires using the entire distribution of weights, not just subgroup weights\nFailing to do this may produce incorrect point estimates and standard errors\nSurvey-specific commands are essential here\n\n\n\n\n\n\nflowchart TD\nB[Define domains&lt;br/&gt; e.g. age group, region &lt;br/&gt; economic activity]\nB --&gt; D[Write domain &lt;br/&gt;estimation    syntax &lt;br/&gt; do NOT filter the data]\nD --&gt; E[Compute domain estimates &lt;br/&gt; totals/proportions/means]\nE --&gt; F[Report precision&lt;br/&gt; using CIs/SEs reflecting &lt;br/&gt; the whole sample design]\nF --&gt; G[Look out for small-n &lt;br/&gt; and sparse cells;&lt;br/&gt;consider collapsing categories]\nG --&gt; H[Document limitations and &lt;br/&gt; any design-factor adjustments]",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Statistical Inference from Survey Data in Practice</span>"
    ]
  },
  {
    "objectID": "04_Statistical_Inference.html#lower-sensitivity-analysis",
    "href": "04_Statistical_Inference.html#lower-sensitivity-analysis",
    "title": "4  Statistical Inference from Survey Data in Practice",
    "section": "4.3 Lower Sensitivity Analysis",
    "text": "4.3 Lower Sensitivity Analysis\nSometimes users are not aiming to conduct formal inference. This may be the case in:\n\nTeaching or learning basic statistical concepts\nInspecting a sample or conducting exploratory work where precision is not essential\n\nIn such cases, applying weights with standard commands can be acceptable. Most software will produce correct point estimates, but the standard errors and confidence intervals will be misleading because the software silently assumes simple random sampling. In some cases (e.g. SPSS, SAS), results may be entirely incorrect because of reliance on population totals with grossing weights.\nFor low-sensitivity work, this may be tolerable, but it should not be used for research outputs that are subject to scrutiny or intended to inform policy.\n\n\n\n\nBlair, Johnny. 2014. Designing Surveys : A Guide to Decisions and Procedures. 3rd edition / Johnny Blair, Ronald F. Czaja, Edward A. Blair. Los Angeles: SAGE.\n\n\nDWP. 2014. “Uncertainty in Family Resources Survey-Based Analysis. Guidance on Estimating Uncertainty in Family Resources Survey-Based Analysis.” Edited by Department for Work and Pensions. 2014. https://www.gov.uk/government/publications/uncertainty-in-family-resources-survey-based-analysis.\n\n\nIBM Support. 2020. “Inconsistency in the Output When Using Weighting Procedure. IBM Support Document Number 419449.” 2020. https://www.ibm.com/support/pages/inconsistency-output-when-using-weighting-procedure.\n\n\nKish, Leslie. 1995. Survey Sampling. Wiley Classics Library. New York: Wiley.\n\n\nLohr, Sharon L. 2019 - 2010. Sampling : Design and Analysis. Second edition. Texts in Statistical Science. Boca Raton, FL: CRC Press.\n\n\nLumley, Thomas. 2023. “Survey: Analysis of Complex Survey Samples.”\n\n\nONS. 2022. “Family Resources Survey, 2020/21 Methodology and Standard Error Tables.” Edited by Office for National Statistics. 2022. https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/1065513/Ch1_Methodology_and_Standard_Errors.ods.\n\n\nP, Curran. 2016. “Complex Survey Designs and Weighting Using Stata: Part 1-3.” 2016. https://www.youtube.com/watch?v=oOpJdC_oeKY.\n\n\nUKDS. 2018. “Data Skills Modules: Applying Weights to Survey Data.” Edited by UK Data Service. 2018. https://www.youtube.com/watch?v=TIad5__WP8g.\n\n\n———. 2019. “Weights in Social Surveys: An Introduction:” Edited by UK Data Service. 2019. https://www.youtube.com/watch?v=Vllr4olp3N4&t=39s.\n\n\nWallrich, Lukas. 2019. “Week 7 Using Survey Weights in r.” Edited by Goldsmiths Core Quantitative Methods Series. 2019. https://www.youtube.com/watch?v=brxx81U6N1o.",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Statistical Inference from Survey Data in Practice</span>"
    ]
  },
  {
    "objectID": "05_R.html",
    "href": "05_R.html",
    "title": "R",
    "section": "",
    "text": "Identifying the survey design and variables\nThe R Survey package (Lumley 2023) provides a comprehensive set of functions for computing point and variance estimates from survey data. At the same time, R Base does not provide a unified sets of commands or syntax for computing weighted estimates. Implementation of statistical theory may vary between packages, but algorithms are usually described in detail in the package documentation.\nIn the example below, we will practice statistical inference with data from the 2017 British Social Attitudes Survey (BSA) taking into account weights and survey design variables. Please note that at the time of writing this document only some issues of the BSA include survey design variables.\nWe first need to find out about the survey design that was used in the 2017 BSA, and the design variables that are made available in the dataset. Such information can usually be found in the documentation that comes together with the data under the mrdoc/pdf folder.\nQuestion 1 What is the design that was used in this survey (i.e. how many stages were there, and what were the units sampled). What were the primary sampling units; the strata (if relevant)?\nNow that we are a bit more familiar with the way the survey was designed, we need to try and identify the design variables we can include when producing estimates. The information can usually be found in the user manual or the data dictionary available under mrdoc/ukda_data_dictionaries.zip The file may need to be decompressed separately.\nQuestion 2 What survey design variables are available? Are there any ones that are missing – if so which ones? What is the name of the weights variables?\n## Specifying the survey design\nrm(list=ls())\nlibrary(dplyr) ### Data manipulation functions\nlibrary(haven) ### Importing stata/SPSS files\nlibrary(Hmisc) ### Extra statistical functions\nlibrary(survey) ### Survey design functions\nlibrary(kableExtra) ### Survey design functions\nsetwd(\"~/OneDrive/DSP/SSP/DSP-core-inference\") ### Edit as appropriate\ndatadir&lt;-\"~/Data/\"                ### Edit as appropriate\n#datadir&lt;-\"~/Dropbox/work/UKDS/data/\"                ### Edit as appropriate\nbsa17&lt;-read_spss(paste0(datadir,\"bsa/UKDA-8450-spss/spss/spss25/bsa2017_for_ukda.sav\"))\ndim(bsa17)\n\n[1] 3988  580\nWe can specify the survey design earlier identified in the data documentation: using Spoint as Primary Sampling Unit, StratID as strata, and WtFactor as weights. R does this by creating a svydesign object, i.e. a survey design informed version of the data, which will be used for subsequent estimation.\nbsa17.s&lt;-svydesign(ids=~Spoint, strata=~StratID, weights=~WtFactor,data=bsa17)\nclass(bsa17.s)\n\n[1] \"survey.design2\" \"survey.design\"",
    "crumbs": [
      "5. Exercises",
      "R"
    ]
  },
  {
    "objectID": "05_R.html#mean-age-and-its-95-confidence-interval",
    "href": "05_R.html#mean-age-and-its-95-confidence-interval",
    "title": "R",
    "section": "Mean age and its 95% confidence interval",
    "text": "Mean age and its 95% confidence interval\nWe can now produce a first set of estimates using this information and compare them with those we would have got without accounting for the survey design. We will compute the average (i.e. mean) age of respondents in the sample. We will need to use svymean()\n\nsvymean(~RAgeE,bsa17.s)\n\n        mean     SE\nRAgeE 48.313 0.4236\n\n\nBy default svymean() computes the standard error of the mean. We need to\nembed it within confint() in order to get a confidence interval.\n\nconfint(svymean(~RAgeE,bsa17.s)) ### Just the confidence interval...\n\n         2.5 %  97.5 %\nRAgeE 47.48289 49.1433\n\nround(\n  c(\n    svymean(~RAgeE,bsa17.s),\n    confint(svymean(~RAgeE,bsa17.s))\n  ),\n  1)### Estimate and CI, rounded\n\nRAgeE             \n 48.3  47.5  49.1 \n\n\nQuestion 3 What would be the consequences of weighing but not accounting for the sample design; not using weights and accounting for the sample design when:\n\ninferring the mean value of the population age?\ninferring the uncertainty of our estimate of the population age?\n\n## Computing a proportion and its 95% confidence interval\nWe can now similarly compute the distribution of a categorical variable in the population by estimating proportions (or percentages), for instance, the proportion of people who declare that they are interested in politics. This is the Politics variable in the BSA. It has five categories ranging from 1 ‘A great deal’ to 5- ‘Not at all’. We could recode 1 and 2 - quite a lot into ‘Significantly’, but since we are only interested in estimating the confidence intervals, we will select the relevant values ‘on the go’.\n\nattr(bsa17$Politics,\"label\")     ### Phrasing of the question\n\n[1] \"How much interest do you have in politics?\"\n\nattr(bsa17$Politics,\"labels\")     ### Value labels\n\nskip, version off route     Item not applicable       ... a great deal, \n                     -2                      -1                       1 \n           quite a lot,                   some,          not very much, \n                      2                       3                       4 \n       or, none at all?              Don`t know                 Refusal \n                      5                       8                       9 \n\ntable(as_factor(bsa17$Politics)) ### Sample distribution\n\n\nskip, version off route     Item not applicable       ... a great deal, \n                      0                       0                     739 \n           quite a lot,                   some,          not very much, \n                    982                    1179                     708 \n       or, none at all?              Don`t know                 Refusal \n                    379                       1                       0 \n\n\nNote: Changes in a data frame are not automatically transferred into svydesign objects used for inferences. We therefore need to recreate it each time we create or recode a variable.\n\nround(100*prop.table(svytable(~(Politics==1 | Politics==2),bsa17.s)),1)\n\nPolitics == 1 | Politics == 2\nFALSE  TRUE \n   57    43 \n\n\nLet us now compute the confidence intervals for these proportions. Traditional statistical software compute these without giving us an idea of the underlying computations going on. Doing this in R requires more coding, but also a better understanding of what is actually estimated.\nConfidence intervals for proportions of categorical variables are usually computed as a sequence of binomial/dichotomic estimations – i.e. one for each category. In R this needs to be specified explicitly via the svyciprop() and I() functions. The former actually computes the proportion and its confidence interval (by default 95%), whereas the latter allows us to define the category we are focusing on.\n\nsvyciprop(~I(Politics==1 | Politics==2),bsa17.s)\n\n                                        2.5% 97.5%\nI(Politics == 1 | Politics == 2) 0.430 0.411 0.449\n\nround(100*\n        c(prop.table(svytable(~(Politics==1 | Politics==2),bsa17.s))[2],\n          attr(svyciprop(~I(Politics==1 | Politics==2),bsa17.s),\"ci\")),1\n)\n\n TRUE  2.5% 97.5% \n 43.0  41.1  44.9 \n\n\nQuestion 4 What is the proportion of respondents aged 17-34 in the sample, as well as its 95% confidence interval? You can use RAgecat5",
    "crumbs": [
      "5. Exercises",
      "R"
    ]
  },
  {
    "objectID": "05_R.html#computing-domain-estimates",
    "href": "05_R.html#computing-domain-estimates",
    "title": "R",
    "section": "Computing domain estimates",
    "text": "Computing domain estimates\nComputing domain estimates, that is estimates for subgroups adds a layer of complexity to the above example. They key point is that as weights are usually designed using the whole of the sample by data producers, confidence intervals or standard errors computed using only part of the sample may be unreliable, as they will rely on some of the weights only. Instead, it is recommended to use commands that take into account the entire distribution of the weights.\nIn R, the command that does this is svyby()\nFor instance, if we would like to compute the mean age of BSA respondents by Government Office Regions, we need to specify:\n\nThe outcome variable whose estimate we want to compute: i.e. RAgeE\nThe grouping variable(s) GOR_ID\nThe estimate function we are going to use here: svymean, the same as we used before\nAnd the type of type of variance estimation we would like to see displayed i.e. standard errors or confidence interval\n\n\nround(\n  svyby(~RAgeE,by=~as_factor(GOR_ID),svymean,design=bsa17.s,vartype = \"ci\")[-1]\n  ,1)\n\n                           RAgeE ci_l ci_u\nA North East                46.1 43.6 48.6\nB North West                49.6 47.3 52.0\nD Yorkshire and The Humber  48.0 45.2 50.8\nE East Midlands             48.6 45.9 51.3\nF West Midlands             48.1 45.0 51.2\nG East of England           49.0 46.0 52.0\nH London                    45.0 43.0 46.9\nJ South East                48.0 45.1 50.8\nK South West                53.4 51.5 55.2\nL Wales                     49.1 45.1 53.1\nM Scotland                  47.3 44.7 50.0\n\n\nNote: we used [-1] from the object created by svyby() in order to remove a column with alphanumeric values (the region names), so that we could round the results without getting an error.\nOur inference seem to suggest that the population in London is among the youngest in the country, and that those in the South West are among the oldest – their respective 95% confidence intervals do not overlap. We should not feel so confident about differences between London and the South East for example, as the CIs partially overlap.\nWe can follow a similar approach with proportions: we just need to specify the category of the variable we are interested in as an outcome, for instance respondents who are significantly interested in politics, and replace svymean by svyciprop.\n\nround(\n  100*\n    svyby(~I(Politics==1 | Politics==2),\n          by=~as_factor(GOR_ID),\n          svyciprop,\n          design=bsa17.s,\n          vartype = \"ci\")[-1],\n  1)\n\n                           I(Politics == 1 | Politics == 2) ci_l ci_u\nA North East                                           33.4 26.6 40.9\nB North West                                           41.9 36.1 48.0\nD Yorkshire and The Humber                             35.6 29.1 42.6\nE East Midlands                                        36.9 32.9 41.1\nF West Midlands                                        36.3 31.5 41.5\nG East of England                                      47.2 41.4 53.1\nH London                                               54.2 47.2 61.1\nJ South East                                           44.6 38.7 50.8\nK South West                                           46.5 39.4 53.8\nL Wales                                                38.6 27.7 50.7\nM Scotland                                             42.7 36.0 49.8\n\n\nQuestion 5 What is the 95% confidence interval for the proportion of people interested in politics in the South West? Is the proportion likely to be different in London? In what way? What is the region of the UK for which the precision of the estimates is likely to be the smallest?\nQuestion 6 Using interest in politics as before, and three category age RAgecat5:\n\nProduce a table of results showing the proportion of respondents significantly interested in Politics by age group and gender\nAssess whether the age difference in interest for politics is similar for each gender?\nBased on the data, is it fair to say that men aged under 35 tend to be more likely to declare themselves interested in politics than women aged 55 and above?\n\n## Inference without survey design variables using R\nExample: count and proportion of the regional population of the UK using the LFS with End User License (EUL)\nAs a rule, EUL versions of the LFS do not include sample design variables. On the other hand they come with two weight variables:\n\npwt22 for estimation with the whole sample\npiwt22 for estimation of income using respondents currently in employment (and accounting for the high level of non response for the earnings variables)\n\nEstimation without accounting for sample design will likely be biased and should be reported as such including warnings, even if the nature (over or underestimation of the precision) and and size are not known. An alternative is to look for design effects tables published by the data producer which could be used to correct for the bias.\nThe Office for National Statistics regularly publishes such tables for the LFS, albeit mostly for their headline statistics. Obtaining further design effects for subpopulations might not be straighforward. The overall methodology is described in this note, and updated tables are provided on this page.\nLet’s see how this can be achieved. But first, let’s produce uncorrected ‘naive’ estimates of the regional population.\n\nlfs&lt;-read_dta((paste0(datadir,\"lfs/UKDA-8999-stata/lfsp_aj22_eul_pwt22.dta\")))%&gt;%\n  select(PWT22,PIWT22,URESMC,ILODEFR)\nnames(lfs)&lt;-tolower(names(lfs))\nlfs$uresmc.f&lt;-droplevels(as_factor(lfs$uresmc))\nlfs.s&lt;-svydesign(ids=~1,weights=~piwt22,data=lfs%&gt;%filter(ilodefr==1)) \nround(confint(svytotal(~uresmc.f,lfs.s)))\n\n                                     2.5 %  97.5 %\nuresmc.fTyne & Wear                 375843  544677\nuresmc.fRest of Northern region     679067  875001\nuresmc.fSouth Yorkshire             361987  542893\nuresmc.fWest Yorkshire              892298 1139996\nuresmc.fRest of Yorks & Humberside  688398  901578\nuresmc.fEast Midlands              1884931 2240257\nuresmc.fEast Anglia                1018147 1293525\nuresmc.fInner London               1403277 1950147\nuresmc.fOuter London               2061142 2573440\nuresmc.fRest of South East         5133587 5816347\nuresmc.fSouth West                 2150551 2532611\nuresmc.fWest Midlands (met county)  921916 1255744\nuresmc.fRest of West Midlands      1249939 1571219\nuresmc.fGreater Manchester         1041396 1341426\nuresmc.fMerseyside                  473854  749424\nuresmc.fRest of North West          929920 1205848\nuresmc.fWales                      1101246 1410746\nuresmc.fStrathclyde                 722247 1020673\nuresmc.fRest of Scotland           1356361 1750183\nuresmc.fNorthern Ireland            689076  803340\n\n\nIn the above example, we are working with the most commonly used flavour of the Labour Force Survey: the quarterly edition. The specific dataset used above is the April-July 2022 issue. Looking at the latest version of the documentation mentioned above - Volume 1, Annex C, we can see a list of design effects for the number of employed respondents by Region of Usual Residence.\n\n\n\nLFS design factors\n\n\nWe can see that for some reason, the number of regions has been reduced from the original 16 to 13. We therefore need to recode our original variable.\n\nlfs&lt;-lfs%&gt;%mutate(uresmc.fn=case_when(\n  lfs$uresmc.f==\"Tyne & Wear\" | \n    lfs$uresmc.f== \"Rest of Northern region\" ~ \"North East\",\n  lfs$uresmc.f==\"South Yorkshire\" |\n    lfs$uresmc.f== \"West Yorkshire\" | \n    lfs$uresmc.f== \"Rest of Yorks & Humberside\" ~ \"Yorkshire & Humberside\",\n  lfs$uresmc.f==\"Inner London\" | \n    lfs$uresmc.f== \"Outer London\"~\"London\",\n  lfs$uresmc.f==\"West Midlands (met county)\" |\n    lfs$uresmc.f== \"Rest of West Midlands\"~\"West Midlands\",\n  lfs$uresmc.f==\"Greater Manchester\" |\n    lfs$uresmc.f== \"Rest of North West\" ~ \"North West\",\n  lfs$uresmc.f==\"Strathclyde\" |\n    lfs$uresmc.f== \"Rest of Scotland\"~\"Scotland\",\n  .default=uresmc.f\n))\n\nFor convenience, reorder the factor levels in order to match the ONS ordering:\n\nlfs$uresmc.fn&lt;-as.factor(lfs$uresmc.fn)\nlfs$uresmc.fn&lt;-factor(\n  lfs$uresmc.fn,\n  levels = levels(lfs$uresmc.fn)[c(5,6,4,13,2,12,1,3,8,10,11,9,7)])\n\nLet us now check the results:\n\nlfs.s&lt;-svydesign(ids=~1,weights=~piwt22,data=lfs%&gt;%filter(ilodefr==1)) \nround(confint(svytotal(~uresmc.fn,lfs.s)))\n\n                                  2.5 %  97.5 %\nuresmc.fnNorth East             1108265 1366323\nuresmc.fnNorth West             2056142 2462448\nuresmc.fnMerseyside              473854  749424\nuresmc.fnYorkshire & Humberside 2077728 2449422\nuresmc.fnEast Midlands          1884931 2240257\nuresmc.fnWest Midlands          2268450 2730368\nuresmc.fnEast Anglia            1018147 1293525\nuresmc.fnLondon                 3620425 4367581\nuresmc.fnRest of South East     5133587 5816347\nuresmc.fnSouth West             2150551 2532611\nuresmc.fnWales                  1101246 1410746\nuresmc.fnScotland               2178250 2671214\nuresmc.fnNorthern Ireland        689076  803340\n\n\nWe can now import the design factors from the LFS documentation. This has to be done by hand, by directly copying the relevant numbers from the LFS.\nWhile we are at it we can also improve the original table:\n\ntot&lt;-data.frame(svytotal(~uresmc.fn,lfs.s))\ntot$deft&lt;-c(0.8712,1.0857,1.3655,1.0051,0.9634,\n            1.0382,0.8936,1.3272,0.9677,0.9137,\n            1.0012,1.0437,0.7113)\ntot[\"2.5%\"]&lt;-tot$total-(1.96*tot$SE*tot$deft)\ntot[\"97.5%\"]&lt;-tot$total+(1.96*tot$SE*tot$deft)\nrownames(tot)&lt;-substr(rownames(tot),10,nchar(rownames(tot)))\nkable(round(tot[,c(\"2.5%\",\"97.5%\")]))\n\n\n\n\n\n2.5%\n97.5%\n\n\n\n\nNorth East\n1124882\n1349706\n\n\nNorth West\n2038728\n2479862\n\n\nMerseyside\n423490\n799788\n\n\nYorkshire & Humberside\n2076776\n2450374\n\n\nEast Midlands\n1891430\n2233758\n\n\nWest Midlands\n2259623\n2739195\n\n\nEast Anglia\n1032794\n1278878\n\n\nLondon\n3498181\n4489825\n\n\nRest of South East\n5144607\n5805327\n\n\nSouth West\n2167034\n2516128\n\n\nWales\n1101057\n1410935\n\n\nScotland\n2167474\n2681990\n\n\nNorthern Ireland\n705569\n786847\n\n\n\n\n\n\nAnswers\nQuestion 1 The 2017 BSA is a three stage stratified random survey, with postcode sectors, adresses and individuals as the units selected at each stage. Primary sampling units were stratified according to geographies (sub regions), population density, and proportion of owner-occupiers. Sampling rate was proportional to the size of postcode sectors (i.e. number of addresses).\nQuestion 2 From the Data Dictionary it appears that the primary sampling units (sub regions) are identified by Spoint and the strata by StratID. The weights variable is WtFactor. Addresses are not provided but could be approximated with a household identifier.\nQuestion 3 Not using weights would make us overestimate the mean age in the population (of those aged 16+) by about 4 years. This is likely to be due to the fact that older respondents are more likely to take part to surveys. Using survey design variables does not alter the value of the estimated population mean. However, not accounting for it would lead us to overestimate the precision/underestimate the uncertainty of our estimate with a narrower confidence interval – by about plus or minus 3 months.\nQuestion 4 The proportion of 17-34 year old in the sample is 28.5 and its 95% confidence interval 26.5, 30.6\nQuestion 5 The 95% confidence interval for the proportion of people interested in politics in the South West is 39.8-53.4. By contrast, it is 47.6-60.8 in London. The region with the lowest precision of estimates (i.e. the widest confidence interval) is Wales, with a 20 percentage point difference between the upper and lower bounds of the confidence interval.\nQuestion 6\n\n\n             I(Politics.s == \"Significantly\") ci_l ci_u\n17-34.Male                               42.9 37.7 48.2\n35-54.Male                               50.8 46.6 54.9\n55+.Male                                 57.8 53.9 61.6\n17-34.Female                             26.3 22.0 31.1\n35-54.Female                             34.1 30.6 37.8\n55+.Female                               43.0 39.6 46.5\n\n\nOlder respondents both male and female tend to be more involved in politics than younger ones.\nThe confidence interval for the proportion of men under 35 and women above 55 interested in politics overlaps; it is unlikely that they differ in the population.\n\n\n\n\nBlair, Johnny. 2014. Designing Surveys : A Guide to Decisions and Procedures. 3rd edition / Johnny Blair, Ronald F. Czaja, Edward A. Blair. Los Angeles: SAGE.\n\n\nDWP. 2014. “Uncertainty in Family Resources Survey-Based Analysis. Guidance on Estimating Uncertainty in Family Resources Survey-Based Analysis.” Edited by Department for Work and Pensions. 2014. https://www.gov.uk/government/publications/uncertainty-in-family-resources-survey-based-analysis.\n\n\nIBM Support. 2020. “Inconsistency in the Output When Using Weighting Procedure. IBM Support Document Number 419449.” 2020. https://www.ibm.com/support/pages/inconsistency-output-when-using-weighting-procedure.\n\n\nKish, Leslie. 1995. Survey Sampling. Wiley Classics Library. New York: Wiley.\n\n\nLohr, Sharon L. 2019 - 2010. Sampling : Design and Analysis. Second edition. Texts in Statistical Science. Boca Raton, FL: CRC Press.\n\n\nLumley, Thomas. 2023. “Survey: Analysis of Complex Survey Samples.”\n\n\nONS. 2022. “Family Resources Survey, 2020/21 Methodology and Standard Error Tables.” Edited by Office for National Statistics. 2022. https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/1065513/Ch1_Methodology_and_Standard_Errors.ods.\n\n\nP, Curran. 2016. “Complex Survey Designs and Weighting Using Stata: Part 1-3.” 2016. https://www.youtube.com/watch?v=oOpJdC_oeKY.\n\n\nUKDS. 2018. “Data Skills Modules: Applying Weights to Survey Data.” Edited by UK Data Service. 2018. https://www.youtube.com/watch?v=TIad5__WP8g.\n\n\n———. 2019. “Weights in Social Surveys: An Introduction:” Edited by UK Data Service. 2019. https://www.youtube.com/watch?v=Vllr4olp3N4&t=39s.\n\n\nWallrich, Lukas. 2019. “Week 7 Using Survey Weights in r.” Edited by Goldsmiths Core Quantitative Methods Series. 2019. https://www.youtube.com/watch?v=brxx81U6N1o.",
    "crumbs": [
      "5. Exercises",
      "R"
    ]
  },
  {
    "objectID": "06_SPSS.html",
    "href": "06_SPSS.html",
    "title": "SPSS",
    "section": "",
    "text": "Identifying the survey design and variables\nAt the time of writing this document (September 2023) Standard editions of SPSS did not include support for estimation with survey design variables, and only limited use of sampling weights. When using grossing weights – i.e. weight that have been designed to enable computing population totals from sample data – as is the case for instance with the Labour Force and Family Resources surveys, measures of dispersion and standard errors will not be adequately computed. It is therefore not recommended to attempt using the base version of SPSS with survey data beyond estimating point estimates. Significance testing, and standard errors will not reflect the correct values. Users wanting to use SPSS with survey data will need to acquire the Premium Edition or the Complex Samples add-on of the software.\nIn this exercise, we will practice statistical inference with data from the 2017 British Social Attitudes Survey (BSA) taking into account weights and survey design variables. Please note that at the time of writing this document only some of the BSA editions include survey design variables.\nWe first need to find out about the survey design that was used in the 2017 BSA, and the design variables that are made available in the dataset. Such information can usually be found in the documentation that comes together with the data under the mrdoc/pdf folder.\nQuestion 1 What is the design that was used in this survey (i.e. how many stages were there, and what were the units sampled). What were the primary sampling units; the strata (if relevant)?\nNow that we are a bit more familiar with the way the survey was designed, we need to try and identify the design variables we can include when producing estimates. The information can usually be found in the user manual or the data dictionary available under mrdoc/ukda_data_dictionaries.zip You may need to decompress the file separately\nQuestion 2 What survey design variables are available? Are there any ones that are missing – if so which ones? What is the name of the weights variables?\n## Specifying the survey design\nLet us first open the 2017 BSA dataset.\nIn principle, we should tell SPSS that we are working with a three stage stratified cluster sample. In practice however, we only have information about the initial i.e. primary sampling units.\nThis is achieved with the CSPLAN command through we create a plan file which contains the survey design information.",
    "crumbs": [
      "5. Exercises",
      "SPSS"
    ]
  },
  {
    "objectID": "06_SPSS.html#identifying-the-survey-design-and-variables",
    "href": "06_SPSS.html#identifying-the-survey-design-and-variables",
    "title": "SPSS",
    "section": "",
    "text": "CD 'C:\\Users\\mscsepw2\\OneDrive - The University of Manchester\\Surveyskills'.\nGET \nFILE=' BSA\\UKDA-8450-spss\\spss\\spss25\\bsa2017_for_ukda.sav'.\n\nCSPLAN ANALYSIS\n/PLAN FILE='bsa17_SPSS_design.csaplan'\n/PLANVARS ANALYSISWEIGHT=WtFactor       \n/SRSESTIMATOR TYPE=WOR\n/PRINT PLAN\n/DESIGN STAGELABEL='S1' STRATA=StratID CLUSTER=Spoint \n/ESTIMATOR TYPE=WR.",
    "crumbs": [
      "5. Exercises",
      "SPSS"
    ]
  },
  {
    "objectID": "06_SPSS.html#mean-age-and-its-95-confidence-interval",
    "href": "06_SPSS.html#mean-age-and-its-95-confidence-interval",
    "title": "SPSS",
    "section": "Mean age and its 95% confidence interval",
    "text": "Mean age and its 95% confidence interval\nWe can now produce a first set of estimates using this design and compare them with those we would have got without accounting for it. We will compute the average (i.e. mean) age of respondents in the sample, as well as the proportion of male and female respondents aged over 55. We will need to use /CSDESCRIPTIVES\nDATASET ACTIVATE DataSet1.\n* Complex Samples Descriptives.\nCSDESCRIPTIVES\n/PLAN FILE='bsa17_SPSS_design.csaplan'\n/SUMMARY VARIABLES=RAgeE\n/MEAN\n/STATISTICS SE CIN(95)\n/MISSING SCOPE=ANALYSIS CLASSMISSING=EXCLUDE.\nUnder the /STATISTICS command we can request either or both the standard error of the mean and its 95% confidence interval.\nWhat difference would it make to the estimates and 95% CI to compute respectively, an unweighted mean, as well as a weighted mean without accounting for the survey design?\nUnweighted means and CI\nDESCRIPTIVES VARIABLES=RAgeE\n/STATISTICS=MEAN SEMEAN.\nSPSS does not provide an option for computing confidence intervals in this case, but we know that a 95% confidence interval is the sample mean respectively minus and plus 1.96 times its standard error. Using the SPSS output, we can compute it ourselves as 1.96*.2872=about .56 years, that is close to 7 months.\nWeighted means and CI without survey design\nWEIGHT BY WtFactor.\nDESCRIPTIVES VARIABLES=RAgeE\n/STATISTICS=MEAN SEMEAN.\nWEIGHT OFF.\nQuestion 3 What would be the consequences of weighting but not accounting for the sample design; not using weights and accounting for the sample design when:\n\ninferring the mean value of the population age?\ninferring the uncertainty of our estimate of the population age?\n\n## Computing a proportion and its 95% confidence interval\nWe can now similarly compute an estimate of a proportion (or percentage) of a categorical variable in the population. For instance, the proportion of people who declare themselves interested in politics. This is the Politics variable. It has five categories that we are going to recode into ‘Significantly’ (interested) and ‘Not’ (significantly) in order to simplify the analysis.\nFREQUENCIES VARIABLES=Politics\n/ORDER=ANALYSIS.\n\nRECODE Politics (9=SYSMIS) (1 thru 2=1) (3 thru 5=2) INTO Politics.s.\nEXECUTE.\n\nVARIABLE LABELS\nPolitics.s   \"Whether significantly interested in politics\".\nVALUE LABELS\nPolitics.s\n1  \"Significant\"\n2  \"Not significant\". \nEXECUTE.\n\nFREQUENCIES VARIABLES=Politics.s\n/ORDER=ANALYSIS.\n\nWEIGHT BY WtFactor.\nFREQUENCIES VARIABLES=Politics.s\n/ORDER=ANALYSIS.\nWEIGHT OFF.\nAs with the mean of age earlier, we can see that the weighted and unweighted point estimates of the proportion of respondents significantly interested in politics change, even if slightly, and that they remain the same when survey design is accounted for.\nWith the help of CSTABULATE we can examine frequencies, proportions and confidence intervals of these proportions accounting for the survey design. As before, the point estimates do not further change once survey design is accounted for.\n* Complex Samples Frequencies.\nCSTABULATE\n/PLAN FILE='bsa17_SPSS_design.csaplan'\n/TABLES VARIABLES=Politics.s\n/CELLS POPSIZE TABLEPCT\n/STATISTICS CIN(95) \n/MISSING SCOPE=TABLE CLASSMISSING=EXCLUDE.\nQuestion 4 What is the proportion of respondents aged 17-34 in the sample, as well as its 95% confidence interval? You can use RAgecat5",
    "crumbs": [
      "5. Exercises",
      "SPSS"
    ]
  },
  {
    "objectID": "06_SPSS.html#domain-i.e.-subpopulation-estimates",
    "href": "06_SPSS.html#domain-i.e.-subpopulation-estimates",
    "title": "SPSS",
    "section": "Domain (i.e. subpopulation) estimates",
    "text": "Domain (i.e. subpopulation) estimates\nAlthough computing estimates for specific groups (for example the average age of people who report being interested in politics) is not conceptually different from doing it for the sample as a whole, doing it with weights as part of an inferential analysis requires some caution. Calculating weighted estimates for a subpopulation while the rest of the sample is left out of the analysis might yield incorrect results. This is why using survey design informed functions is particularly recommended when doing such analyses.\nThe SPSS command CSDESCRIPTIVES that we used above makes such domain estimation relatively straightforward. If we would like to compute the mean age of BSA respondents by government office regions, we need to specify:\n\nThe outcome variable whose estimate we want to compute: i.e. RAgeE\nThe grouping variable(s) GOR_ID\nAnd the type of type of variance estimation we would like to see displayed i.e. standard errors or confidence interval\n\n* Complex Samples Descriptives.\nCSDESCRIPTIVES\n/PLAN FILE='bsa17_SPSS_design.csaplan'\n/SUMMARY VARIABLES=RAgeE\n/SUBPOP TABLE=GOR_ID DISPLAY=LAYERED\n/MEAN\n/STATISTICS CIN(95)\n/MISSING SCOPE=ANALYSIS CLASSMISSING=EXCLUDE.\nOur inference seem to suggest that the population in London is among the youngest in the country, and that those in the South West are among the oldest – their respective 95% confidence intervals do not overlap. We should not feel so confident about differences between London and the South East for example, as the CIs partially overlap.\nWe can also examine proportions for subpopulations. In order to do this, we need to specify the category of the variable we are interested in as an outcome. For instance, the syntax below uses respondents who are significantly interested in politics:\n* Complex Samples Frequencies.\nCSTABULATE\n/PLAN FILE='bsa17_SPSS_design.csaplan'\n/TABLES VARIABLES=Politics.s\n/SUBPOP TABLE=GOR_ID DISPLAY=LAYERED\n/CELLS TABLEPCT\n/STATISTICS CIN(95) \n/MISSING SCOPE=TABLE CLASSMISSING=EXCLUDE.\nQuestion 5 What is the 95% confidence interval for the proportion of people interested in politics in the South West? Is the proportion likely to be different in London? In what way? What is the region of the UK for which the precision of the estimates is likely to be the smallest?\nWhen using CSTABULATE, we can define domains or subpopulations with several variables, not just one. For example, we could look at gender differences in political affiliations by regions. However, as the size of subgroups decrease, so does the precision of the estimates as their confidence interval widens, to a point where their substantive interest is not meaningful anymore.\nQuestion 6 Using interest in politics as before, and three category age RAgecat5:\n\nProduce a table of results showing the proportion of respondents significantly interested in Politics by age group and gender\nAssess whether the age difference in interest for politics is similar for each gender?\nBased on the data, is it fair to say that men aged under 35 tend to be more likely to declare themselves interested in politics than women aged 55 and above?\n\nCSTABULATE\n/PLAN FILE='bsa17_SPSS_design.csaplan'\n/TABLES VARIABLES=Politics.s\n/SUBPOP TABLE=Rsex BY RAgecat5 DISPLAY=LAYERED\n/CELLS TABLEPCT\n/STATISTICS CIN(95) \n/MISSING SCOPE=TABLE CLASSMISSING=EXCLUDE.\n\nAnswers\nQuestion 1 The 2017 BSA is a three stage stratified random survey, with postcode sectors, adresses and individuals as the units selected at each stage. Primary sampling units were stratified according to geographies (sub regions), population density, and proportion of owner-occupiers. Sampling rate was proportional to the size of postcode sectors (i.e. number of addresses).\nQuestion 2 From the Data Dictionary it appears that the primary sampling units (sub regions) are identified by Spoint and the strata by StratID. The weights variable is WtFactor. Addresses are not provided but could be approximated with a household identifier.\nQuestion 3 Not using weights would make us overestimate the mean age in the population (of those aged 16+) by about 4 years. This is likely to be due to the fact that older respondents are more likely to take part to surveys. Using survey design variables does not alter the value of the estimated population mean. However, not accounting for it would lead us to overestimate the precision/underestimate the uncertainty of our estimate with a narrower confidence interval – by about plus or minus 3 months.\nQuestion 4 The proportion of 17-34 year old in the sample is 28.5 and its 95% confidence interval 26.5, 30.6\nQuestion 5 The 95% confidence interval for the proportion of people interested in politics in the South West is 39.8-53.4. By contrast, it is 47.6-60.8 in London. The region with the lowest precision of estimates (i.e. the widest confidence interval) is Wales, with a 20 percentage point difference between the upper and lower bounds of the confidence interval.\nQuestion 6\n\n\n             I(Politics.s == \"Significantly\") ci_l ci_u\n17-34.Male                               42.9 37.7 48.2\n35-54.Male                               50.8 46.6 54.9\n55+.Male                                 57.8 53.9 61.6\n17-34.Female                             26.3 22.0 31.1\n35-54.Female                             34.1 30.6 37.8\n55+.Female                               43.0 39.6 46.5\n\n\nOlder respondents both male and female tend to be more involved in politics than younger ones.\nThe confidence interval for the proportion of men under 35 and women above 55 interested in politics overlaps; it is unlikely that they differ in the population.\n\n\n\n\nBlair, Johnny. 2014. Designing Surveys : A Guide to Decisions and Procedures. 3rd edition / Johnny Blair, Ronald F. Czaja, Edward A. Blair. Los Angeles: SAGE.\n\n\nDWP. 2014. “Uncertainty in Family Resources Survey-Based Analysis. Guidance on Estimating Uncertainty in Family Resources Survey-Based Analysis.” Edited by Department for Work and Pensions. 2014. https://www.gov.uk/government/publications/uncertainty-in-family-resources-survey-based-analysis.\n\n\nIBM Support. 2020. “Inconsistency in the Output When Using Weighting Procedure. IBM Support Document Number 419449.” 2020. https://www.ibm.com/support/pages/inconsistency-output-when-using-weighting-procedure.\n\n\nKish, Leslie. 1995. Survey Sampling. Wiley Classics Library. New York: Wiley.\n\n\nLohr, Sharon L. 2019 - 2010. Sampling : Design and Analysis. Second edition. Texts in Statistical Science. Boca Raton, FL: CRC Press.\n\n\nLumley, Thomas. 2023. “Survey: Analysis of Complex Survey Samples.”\n\n\nONS. 2022. “Family Resources Survey, 2020/21 Methodology and Standard Error Tables.” Edited by Office for National Statistics. 2022. https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/1065513/Ch1_Methodology_and_Standard_Errors.ods.\n\n\nP, Curran. 2016. “Complex Survey Designs and Weighting Using Stata: Part 1-3.” 2016. https://www.youtube.com/watch?v=oOpJdC_oeKY.\n\n\nUKDS. 2018. “Data Skills Modules: Applying Weights to Survey Data.” Edited by UK Data Service. 2018. https://www.youtube.com/watch?v=TIad5__WP8g.\n\n\n———. 2019. “Weights in Social Surveys: An Introduction:” Edited by UK Data Service. 2019. https://www.youtube.com/watch?v=Vllr4olp3N4&t=39s.\n\n\nWallrich, Lukas. 2019. “Week 7 Using Survey Weights in r.” Edited by Goldsmiths Core Quantitative Methods Series. 2019. https://www.youtube.com/watch?v=brxx81U6N1o.",
    "crumbs": [
      "5. Exercises",
      "SPSS"
    ]
  },
  {
    "objectID": "07_Stata.html",
    "href": "07_Stata.html",
    "title": "Stata",
    "section": "",
    "text": "Identifying the survey design and variables\nStata provides comprehensive support for computing estimates from survey data using weights and survey design variables. Perhaps a bit confusingly to some users, it distinguishes between four weighted estimation techniques, also called weights:\nThese mostly differ in the way standard errors are estimated.\nIn most cases, survey weights available in UKDS datasets should be treated as probability weights in Stata jargon. Indeed not all of the above weighting methods were designed to work with survey data.\nAs other statistical software, weighted estimation in Stata can either be performed:\nAt the same time, a feature of Stata is that a number of basic estimation commands, such as summarise or tabulate. This is meant to nudge users of survey data to prioritise the survey estimation commands rather than command-based weighting.\nIn the example below, we will practice statistical inference with data from the 2017 British Social Attitudes Survey (BSA) taking into account weights and survey design variables. Please note that at the time of writing this document only some issues of the BSA include survey design variables.\nWe first need to find out about the survey design that was used in the 2017 BSA, and the design variables that are made available in the dataset. Such information can usually be found in the documentation that comes together with the data under the mrdoc/pdf folder.\nNow that we are a bit more familiar with the way the survey was designed, we need to try and identify the design variables we can include when producing estimates. The information can usually be found in the user manual or the data dictionary available under mrdoc/ukda_data_dictionaries.zip The file may need to be decompressed separately.",
    "crumbs": [
      "5. Exercises",
      "Stata"
    ]
  },
  {
    "objectID": "07_Stata.html#identifying-the-survey-design-and-variables",
    "href": "07_Stata.html#identifying-the-survey-design-and-variables",
    "title": "Stata",
    "section": "",
    "text": "TipQuestion 1 What was the design used in this survey (i.e. think stages and units sampled). What were the primary sampling units; the strata (if relevant)?\n\n\n\n\n\nThe 2017 BSA is a three stage stratified random survey, with postcode sectors, adresses and individuals as the units selected at each stage. Primary sampling units were stratified according to geographies (sub regions), population density, and proportion of owner-occupiers. Sampling rate was proportional to the size of postcode sectors (i.e. number of addresses).\n\n\n\n\n\n\n\n\n\n\n\nTipQuestion 2 What survey design variables are available? Are there any ones that are missing – if so which ones? What is the name of the weights variables?\n\n\n\n\n\nFrom the Data Dictionary it appears that the primary sampling units (sub regions) are identified by Spoint and the strata by StratID. The weights variable is WtFactor. Addresses are not provided but could be approximated with a household identifier.",
    "crumbs": [
      "5. Exercises",
      "Stata"
    ]
  },
  {
    "objectID": "07_Stata.html#specifying-the-survey-design-in-stata",
    "href": "07_Stata.html#specifying-the-survey-design-in-stata",
    "title": "Stata",
    "section": "Specifying the survey design in Stata",
    "text": "Specifying the survey design in Stata\nWe first need to open the BSA dataset.\n\n*** Setting the working directory\n*** Edit the line below  as appropriate\nquietly  cd ~/OneDrive/DSP/SSP/DSP-core-inference \n\nuse ~/Data/bsa/UKDA-8450-stata/bsa2017_for_ukda.dta\n\n*** We use the short option in order to avoid \n*** all variables in the dataset to be list\n\ndescribe, short \n\n\n\n\n\n. *** Setting the working directory\n. *** Edit the line below  as appropriate\n. quietly  cd ~/OneDrive/DSP/SSP/DSP-core-inference \n\n. \n. use ~/Data/bsa/UKDA-8450-stata/bsa2017_for_ukda.dta\n\n. \n. *** We use the short option in order to avoid \n. *** all variables in the dataset to be list\n. \n. describe, short \n\nContains data from ~/Data/bsa/UKDA-8450-stata/bsa2017_for_ukda.dta\n Observations:         3,988                  \n    Variables:           580                  09 FEB 2021 09:29\nSorted by: \n\n. \n\n\nWe can now specify the survey design earlier identified in the data documentation using:\n\nSpoint as Primary Sampling Unit;\nStratID as strata…\nand WtFactor as weights.\n\nThe Stata command to do this is svyset.\n\n*** First examine the survey design variables\n\ndescribe Spoint StratID WtFactor\n\nsvyset Spoint [pw=WtFactor], strata(StratID)\n\n\n. *** First examine the survey design variables\n. \n. describe Spoint StratID WtFactor\n\nVariable      Storage   Display    Value\n    name         type    format    label      Variable label\n-------------------------------------------------------------------------------\nSpoint          int     %8.0g                 Sample point\nStratID         int     %8.0g                 Stratification ID\nWtFactor        double  %12.0g                Final BSA weight\n\n. \n. svyset Spoint [pw=WtFactor], strata(StratID)\n\nSampling weights: WtFactor\n             VCE: linearized\n     Single unit: missing\n        Strata 1: StratID\n Sampling unit 1: Spoint\n           FPC 1: &lt;zero&gt;\n\n.",
    "crumbs": [
      "5. Exercises",
      "Stata"
    ]
  },
  {
    "objectID": "07_Stata.html#mean-age-and-its-95-confidence-interval",
    "href": "07_Stata.html#mean-age-and-its-95-confidence-interval",
    "title": "Stata",
    "section": "Mean age and its 95% confidence interval",
    "text": "Mean age and its 95% confidence interval\nWe can now produce a first set of estimates and compare it with those we would have got without accounting for the survey design. We will compute the average (i.e. mean) age of respondents. From this point, we will are going to use the svy: prefix before Stata estimation commands, so that our estimates are informed by the survey design.\n\nsvy:mean RAgeE\n\n. svy:mean RAgeE\n(running mean on estimation sample)\n\nSurvey: Mean estimation\n\nNumber of strata = 159            Number of obs   =      3,988\nNumber of PSUs   = 372            Population size = 3,988.0019\n                                  Design df       =        213\n\n--------------------------------------------------------------\n             |             Linearized\n             |       Mean   std. err.     [95% conf. interval]\n-------------+------------------------------------------------\n       RAgeE |   48.31309   .4235811      47.47815    49.14804\n--------------------------------------------------------------\n\n\nBy default svy:mean computes both the standard error of the mean and its confidence interval.\nFrom the above results, we can see that back in 2017 the mean age of the British population aged 16 and over was likely to range between 47.5 and 49.1 years.\n\n\n\n\n\n\nTipQuestion 3 What would be the consequences of weighing but not accounting for the sample design; not using weights and accounting for the sample design on estimating the mean and its confidence interval\n\n\n\n\n\n\nNot using weights would make us overestimate the mean age in the population (of those aged 16+) by about 4 years. This is likely to be due to the fact that older respondents are more likely to take part to surveys.\n\n\nmean RAgeE\n\n. mean RAgeE\n\nMean estimation                          Number of obs = 3,988\n\n--------------------------------------------------------------\n             |       Mean   Std. err.     [95% conf. interval]\n-------------+------------------------------------------------\n       RAgeE |   52.19358   .2872482      51.63041    52.75675\n--------------------------------------------------------------\n\n\n\nNot using survey design variables does not alter the value of the estimated population mean. However, this would lead us to - marginally - overestimate the precision/underestimate the uncertainty of our estimate with a narrower confidence interval ie between 47.6 and 49 years, that is by a little bit more than a month in each direction.\n\n\n*** Declaring survey design as simple random\nsvyset [pw=WtFactor]\nsvy:mean RAgeE\n\n\n. *** Declaring survey design as simple random\n. svyset [pw=WtFactor]\n\nSampling weights: WtFactor\n             VCE: linearized\n     Single unit: missing\n        Strata 1: &lt;one&gt;\n Sampling unit 1: &lt;observations&gt;\n           FPC 1: &lt;zero&gt;\n\n. svy:mean RAgeE\n(running mean on estimation sample)\n\nSurvey: Mean estimation\n\nNumber of strata =     1          Number of obs   =      3,988\nNumber of PSUs   = 3,988          Population size = 3,988.0019\n                                  Design df       =      3,987\n\n--------------------------------------------------------------\n             |             Linearized\n             |       Mean   std. err.     [95% conf. interval]\n-------------+------------------------------------------------\n       RAgeE |   48.31309   .3435013      47.63964    48.98655\n--------------------------------------------------------------\n\n.",
    "crumbs": [
      "5. Exercises",
      "Stata"
    ]
  },
  {
    "objectID": "07_Stata.html#proportions-and-their-95-confidence-interval",
    "href": "07_Stata.html#proportions-and-their-95-confidence-interval",
    "title": "Stata",
    "section": "Proportions and their 95% confidence interval",
    "text": "Proportions and their 95% confidence interval\nWe can similarly estimate the distribution of a categorical variable in the population by computing proportions (or percentages), for instance, the proportion of people who declare that they are interested in politics. This is the Politics variable in the BSA. It has five categories ranging from 1 - ‘A great deal’ to 5 - ‘None at all’. We are going to recode it into a dichotomic variable with 1 and 2 - quite a lot and as ‘Significantly’, and the rest as ‘Not so much’.\n\n*** Overview of the variable\ninspect Politics\n\n*** Frequency distribution\ntab Politics\n\n\n. *** Overview of the variable\n. inspect Politics\n\nPolitics:  How much interest do you have        Number of observations\n-------------------------------------------------------------------------------\n                                             Total      Integers   Nonintegers\n|  #                         Negative            -             -             -\n|  #                         Zero                -             -             -\n|  #   #                     Positive        3,988         3,988             -\n|  #   #   #                           -----------   -----------   -----------\n|  #   #   #                 Total           3,988         3,988             -\n|  #   #   #   .   .         Missing             -\n+----------------------                -----------\n1                     8                      3,988\n   (6 unique values)\n\n      Politics is labeled and all values are documented in the label.\n\n. \n. *** Frequency distribution\n. tab Politics\n\n   How much interest do |\n  you have in politics? |      Freq.     Percent        Cum.\n------------------------+-----------------------------------\n      ... a great deal, |        739       18.53       18.53\n           quite a lot, |        982       24.62       43.15\n                  some, |      1,179       29.56       72.72\n         not very much, |        708       17.75       90.47\n       or, none at all? |        379        9.50       99.97\n             Don`t know |          1        0.03      100.00\n------------------------+-----------------------------------\n                  Total |      3,988      100.00\n\n. \n\n\nLet’s create the dichotomic version and look at the results:\n\nrecode Politics 1 2=1 3/max=0, gen(DPol)\n\n*** Labelling the variable\nlab def LDPol 0 \"Not so much\" 1 \"Significantly\"\nlab val DPol LDPol\n\n*** Frequency distribution\ntab Politics DPol \n\n\n. recode Politics 1 2=1 3/max=0, gen(DPol)\n(3,249 differences between Politics and DPol)\n\n. \n. *** Labelling the variable\n. lab def LDPol 0 \"Not so much\" 1 \"Significantly\"\n\n. lab val DPol LDPol\n\n. \n. *** Frequency distribution\n. tab Politics DPol \n\n                      |  RECODE of Politics\n                      | (How much interest do\n                      |      you have in\n How much interest do |      politics?)\nyou have in politics? | Not so mu  Significa |     Total\n----------------------+----------------------+----------\n    ... a great deal, |         0        739 |       739 \n         quite a lot, |         0        982 |       982 \n                some, |     1,179          0 |     1,179 \n       not very much, |       708          0 |       708 \n     or, none at all? |       379          0 |       379 \n           Don`t know |         1          0 |         1 \n----------------------+----------------------+----------\n                Total |     2,267      1,721 |     3,988 \n\n. \n\n\nWe can now estimate the proportion of people significantly interested in politics in the population. We just need to add ci as an option in order to also get the 95% confidence interval.\n\n*** Let's not forget to declare the survey design again\n\n*** We need to declare again the survey design after the last exercise\nsvyset Spoint [pw=WtFactor], strata(StratID)\n\nsvy:tab DPol,percent ci\n\n\n. *** Let's not forget to declare the survey design again\n. \n. *** We need to declare again the survey design after the last exercise\n. svyset Spoint [pw=WtFactor], strata(StratID)\n\nSampling weights: WtFactor\n             VCE: linearized\n     Single unit: missing\n        Strata 1: StratID\n Sampling unit 1: Spoint\n           FPC 1: &lt;zero&gt;\n\n. \n. svy:tab DPol,percent ci\n(running tabulate on estimation sample)\n\nNumber of strata = 159                            Number of obs   =      3,988\nNumber of PSUs   = 372                            Population size = 3,988.0019\n                                                  Design df       =        213\n\n----------------------------------------------\nRECODE of |\nPolitics  |\n(How much |\ninterest  |\ndo you    |\nhave in   |\npolitics? |\n)         | percentage          lb          ub\n----------+-----------------------------------\n Not so m |      56.99       55.06        58.9\n Signific |      43.01        41.1       44.94\n          | \n    Total |        100                        \n----------------------------------------------\nKey: percentage = Cell percentage\n             lb = Lower 95% confidence bound for cell percentage\n             ub = Upper 95% confidence bound for cell percentage\n\n. \n\n\n\n\n\n\n\n\nTipQuestion 4 What is the proportion of respondents aged 17-34 in the sample, as well as its 95% confidence interval? You can use RAgecat5\n\n\n\n\n\n\nThe proportion of 17-34 year old in the sample is\n\n\nsvy:tab RAgecat5, percent ci\n\n. svy:tab RAgecat5, percent ci\n(running tabulate on estimation sample)\n\nNumber of strata = 159                            Number of obs   =      3,988\nNumber of PSUs   = 372                            Population size = 3,988.0019\n                                                  Design df       =        213\n\n----------------------------------------------\nAge of    |\nresponden |\nt(grouped |\n)         |\n&lt;3-catego |\nry&gt; dv    | percentage          lb          ub\n----------+-----------------------------------\n    17-34 |      28.46       26.46       30.56\n    35-54 |      33.98        32.3       35.69\n      55+ |       37.5       35.67       39.36\n   DK/Ref |      .0601       .0214       .1683\n          | \n    Total |        100                        \n----------------------------------------------\nKey: percentage = Cell percentage\n             lb = Lower 95% confidence bound for cell percentage\n             ub = Upper 95% confidence bound for cell percentage",
    "crumbs": [
      "5. Exercises",
      "Stata"
    ]
  },
  {
    "objectID": "07_Stata.html#domain-estimates",
    "href": "07_Stata.html#domain-estimates",
    "title": "Stata",
    "section": "Domain estimates",
    "text": "Domain estimates\nDomain estimates refer to estimates for groups or subpopulations, which adds a layer of complexity to what we have done so far. They key point is that as survey weights are usually designed by data producers using the whole of the sample, confidence intervals and standard errors computed using only part of the sample - such as for example when subsetting the dataset or removing observations - may be unreliable, as they will rely on some of the weights only. Instead, it is recommended to use commands that take into account the entire distribution of the weights.\nIn Stata, this can be either achieved with subpop() or over.\nsubpop() computes estimates for single groups identified either by a dummy variable (ie coded 0-1), or by a conditional statement. For instance, if we would like to know the mean age of BSA respondents in the North East, we need to specify (using the Government Office Regions GOR_ID variable):\n\nsvy, subpop(if GOR_ID==1):mean RAgeE\n\n. svy, subpop(if GOR_ID==1):mean RAgeE\n(running mean on estimation sample)\n\nSurvey: Mean estimation\n\nNumber of strata =  8             Number of obs   =        214\nNumber of PSUs   = 19             Population size = 199.035253\n                                  Subpop. no. obs =        180\n                                  Subpop. size    = 167.274844\n                                  Design df       =         11\n\n--------------------------------------------------------------\n             |             Linearized\n             |       Mean   std. err.     [95% conf. interval]\n-------------+------------------------------------------------\n       RAgeE |   46.10143   1.269496      43.30729    48.89557\n--------------------------------------------------------------\nNote: 151 strata omitted because they contain no subpopulation\n      members.\n\n\nThe above would be identical to:\n\n*** Creates dummy variables with the category number as suffix\nquietly tab GOR_ID ,gen(region) \n\nsvy, subpop(region1): mean RAgeE, cformat(%9.1f)\n\n\n. *** Creates dummy variables with the category number as suffix\n. quietly tab GOR_ID ,gen(region) \n\n. \n. svy, subpop(region1): mean RAgeE, cformat(%9.1f)\n(running mean on estimation sample)\n\nSurvey: Mean estimation\n\nNumber of strata =  8             Number of obs   =        214\nNumber of PSUs   = 19             Population size = 199.035253\n                                  Subpop. no. obs =        180\n                                  Subpop. size    = 167.274844\n                                  Design df       =         11\n\n--------------------------------------------------------------\n             |             Linearized\n             |       Mean   std. err.     [95% conf. interval]\n-------------+------------------------------------------------\n       RAgeE |       46.1        1.3          43.3        48.9\n--------------------------------------------------------------\nNote: 151 strata omitted because they contain no subpopulation\n      members.\n\n. \n\n\nIn case there are more than a few subpopulations, Stata provides the ‘over’ option, that can be used with in conjunction with estimation commands. In our case:\n\nsvy: mean RAgeE,over(GOR_ID) cformat(%9.1f)\n\n. svy: mean RAgeE,over(GOR_ID) cformat(%9.1f)\n(running mean on estimation sample)\n\nSurvey: Mean estimation\n\nNumber of strata = 159                           Number of obs   =      3,988\nNumber of PSUs   = 372                           Population size = 3,988.0019\n                                                 Design df       =        213\n\n-----------------------------------------------------------------------------\n                            |             Linearized\n                            |       Mean   std. err.     [95% conf. interval]\n----------------------------+------------------------------------------------\n             c.RAgeE@GOR_ID |\n              A North East  |       46.1        1.3          43.6        48.6\n              B North West  |       49.6        1.2          47.2        52.0\nD Yorkshire and The Humber  |       48.0        1.4          45.2        50.8\n           E East Midlands  |       48.6        1.4          45.9        51.4\n           F West Midlands  |       48.1        1.6          45.0        51.2\n         G East of England  |       49.0        1.5          46.0        52.1\n                  H London  |       45.0        1.0          43.0        46.9\n              J South East  |       48.0        1.4          45.1        50.8\n              K South West  |       53.4        0.9          51.5        55.2\n                   L Wales  |       49.1        2.0          45.1        53.1\n                M Scotland  |       47.3        1.4          44.7        50.0\n-----------------------------------------------------------------------------\n\n\nOur results seem to suggest that the population in London is among the youngest in the country, and that those in the South West are among the oldest – their respective 95% confidence intervals do not overlap. We should not feel so confident about differences between London and the South East, as the CIs partially overlap.\nWe can follow a similar approach with proportions: we just need to specify the variable we are interested in as an outcome, for instance respondents who are significantly interested in politics, and either replace mean with proportion or even more simply use tab:\n\nsvy:proportion DPol, percent over(GOR_ID) \nsvy:tab GOR_ID DPol, row percent  ci \n\n\n. svy:proportion DPol, percent over(GOR_ID) \n(running proportion on estimation sample)\n\nSurvey: Percent estimation\n\nNumber of strata = 159                            Number of obs   =      3,988\nNumber of PSUs   = 372                            Population size = 3,988.0019\n                                                  Design df       =        213\n\n------------------------------------------------------------------------------\n                             |             Linearized            Logit\n                             |    Percent   std. err.     [95% conf. interval]\n-----------------------------+------------------------------------------------\n                 DPol@GOR_ID |\n   Not so much A North East  |      66.62       3.12         60.21       72.46\n   Not so much B North West  |      58.09       2.91         52.26       63.70\n                Not so much #|\n D Yorkshire and The Humber  |      64.42       3.23         57.84       70.51\nNot so much E East Midlands  |      63.09       1.92         59.23       66.79\nNot so much F West Midlands  |      63.67       2.41         58.79       68.28\n                Not so much #|\n          G East of England  |      52.82       2.78         47.33       58.24\n       Not so much H London  |      45.77       3.37         39.25       52.45\n   Not so much J South East  |      55.35       2.97         49.46       61.10\n   Not so much K South West  |      53.46       3.47         46.60       60.18\n        Not so much L Wales  |      61.42       5.16         50.90       70.97\n     Not so much M Scotland  |      57.26       3.30         50.67       63.60\n Significantly A North East  |      33.38       3.12         27.54       39.79\n Significantly B North West  |      41.91       2.91         36.30       47.74\n              Significantly #|\n D Yorkshire and The Humber  |      35.58       3.23         29.49       42.16\n              Significantly #|\n            E East Midlands  |      36.91       1.92         33.21       40.77\n              Significantly #|\n            F West Midlands  |      36.33       2.41         31.72       41.21\n              Significantly #|\n          G East of England  |      47.18       2.78         41.76       52.67\n     Significantly H London  |      54.23       3.37         47.55       60.75\n Significantly J South East  |      44.65       2.97         38.90       50.54\n Significantly K South West  |      46.54       3.47         39.82       53.40\n      Significantly L Wales  |      38.58       5.16         29.03       49.10\n   Significantly M Scotland  |      42.74       3.30         36.40       49.33\n------------------------------------------------------------------------------\n\n. svy:tab GOR_ID DPol, row percent  ci \n(running tabulate on estimation sample)\n\nNumber of strata = 159                            Number of obs   =      3,988\nNumber of PSUs   = 372                            Population size = 3,988.0019\n                                                  Design df       =        213\n\n-------------------------------------------------------\n2007      |\nversion : |\nGovernmen |RECODE of Politics (How much interest do you\nt office  |             have in politics?)             \nregion    |      Not so m       Signific          Total\n----------+--------------------------------------------\n  A North |         66.62          33.38            100\n          | [60.21,72.46]  [27.54,39.79]               \n          | \n  B North |         58.09          41.91            100\n          |  [52.26,63.7]   [36.3,47.74]               \n          | \n D Yorksh |         64.42          35.58            100\n          | [57.84,70.51]  [29.49,42.16]               \n          | \n E East M |         63.09          36.91            100\n          | [59.23,66.79]  [33.21,40.77]               \n          | \n F West M |         63.67          36.33            100\n          | [58.79,68.28]  [31.72,41.21]               \n          | \n G East o |         52.82          47.18            100\n          | [47.33,58.24]  [41.76,52.67]               \n          | \n H London |         45.77          54.23            100\n          | [39.25,52.45]  [47.55,60.75]               \n          | \n  J South |         55.35          44.65            100\n          |  [49.46,61.1]   [38.9,50.54]               \n          | \n  K South |         53.46          46.54            100\n          |  [46.6,60.18]   [39.82,53.4]               \n          | \n  L Wales |         61.42          38.58            100\n          |  [50.9,70.97]   [29.03,49.1]               \n          | \n M Scotla |         57.26          42.74            100\n          |  [50.67,63.6]   [36.4,49.33]               \n          | \n    Total |         56.99          43.01            100\n          |  [55.06,58.9]   [41.1,44.94]               \n-------------------------------------------------------\nKey: Row percentage\n     [95% confidence interval for row percentage]\n\n  Pearson:\n    Uncorrected   chi2(10)        =   59.5640\n    Design-based  F(8.74, 1860.92)=    4.0419     P = 0.0000\n\n. \n\n\n\n\n\n\n\n\nTipQuestion 5 What is the 95% confidence interval for the proportion of people interested in politics in the South West? Is the proportion likely to be different in London? In what way? What is the region of the UK for which the precision of the estimates is likely to be the smallest?\n\n\n\n\n\nThe 95% confidence interval for the proportion of people interested in politics in the South West in 2017 was 39.8-53.4. By contrast, it was 47.6-60.8 in London. The region with the lowest precision of estimates (i.e. the widest confidence interval) was Wales, with a 20 percentage point difference between the upper and lower bounds of the confidence interval.\n\n\n\n\n\n\n\n\n\n\nTipQuestion 6 *Using interest in politics as before, and three category age RAgecat5: 1. Produce a table of results showing the proportion of respondents significantly interested in politics by age group and gender; 2. Assess whether the age difference in interest in politics is similar for each gender; 3. Based on the data, is it fair to say that men aged under 35 tend to be more likely to declare themselves interested in politics than women aged 55 and above?\n\n\n\n\n\n\nsvy,subpop(if RAgecat5==1 & Rsex==1): proportion DPol,percent\nsvy: proportion DPol,over(RAgecat5 Rsex)\n\n\n. svy,subpop(if RAgecat5==1 & Rsex==1): proportion DPol,percent\n(running proportion on estimation sample)\n\nSurvey: Percent estimation\n\nNumber of strata = 138              Number of obs   =      3,591\nNumber of PSUs   = 326              Population size = 3,608.3226\n                                    Subpop. no. obs =        339\n                                    Subpop. size    = 573.962978\n                                    Design df       =        188\n\n----------------------------------------------------------------\n               |             Linearized            Logit\n               |    Percent   std. err.     [95% conf. interval]\n---------------+------------------------------------------------\n          DPol |\n  Not so much  |      57.28       2.64         52.02       62.38\nSignificantly  |      42.72       2.64         37.62       47.98\n----------------------------------------------------------------\nNote: 21 strata omitted because they contain no subpopulation\n      members.\n\n. svy: proportion DPol,over(RAgecat5 Rsex)\n(running proportion on estimation sample)\n\nSurvey: Proportion estimation\n\nNumber of strata = 159                            Number of obs   =      3,988\nNumber of PSUs   = 372                            Population size = 3,988.0019\n                                                  Design df       =        213\n\n------------------------------------------------------------------------------\n                             |             Linearized            Logit\n                             | Proportion   std. err.     [95% conf. interval]\n-----------------------------+------------------------------------------------\n          DPol@RAgecat5#Rsex |\n     Not so much 17-34#Male  |   .5728105   .0263534      .5202484    .6237784\n   Not so much 17-34#Female  |   .7368923   .0228962      .6893531    .7794836\n     Not so much 35-54#Male  |   .4921008   .0210396      .4507772    .5335326\n   Not so much 35-54#Female  |   .6587693   .0180841      .6222803    .6934697\n       Not so much 55+#Male  |   .4220344   .0197446      .3836731    .4613601\n     Not so much 55+#Female  |    .569871   .0175356      .5350198    .6040433\n    Not so much DK/Ref#Male  |          1          .             .           .\n  Not so much DK/Ref#Female  |          0  (no observations)\n   Significantly 17-34#Male  |   .4271895   .0263534      .3762216    .4797516\n Significantly 17-34#Female  |   .2631077   .0228962      .2205164    .3106469\n   Significantly 35-54#Male  |   .5078992   .0210396      .4664674    .5492228\n Significantly 35-54#Female  |   .3412307   .0180841      .3065303    .3777197\n     Significantly 55+#Male  |   .5779656   .0197446      .5386399    .6163269\n   Significantly 55+#Female  |    .430129   .0175356      .3959567    .4649802\n  Significantly DK/Ref#Male  |          0  (no observations)\nSignificantly DK/Ref#Female  |          1          .             .           .\n------------------------------------------------------------------------------\n\n. \n\n\nOlder respondents both male and female tend to be more involved in politics than younger ones.\nThe confidence interval for the proportion of men under 35 and women above 55 interested in politics overlaps; it is unlikely that they differ in the population.",
    "crumbs": [
      "5. Exercises",
      "Stata"
    ]
  },
  {
    "objectID": "07_Stata.html#inference-without-survey-design-variables",
    "href": "07_Stata.html#inference-without-survey-design-variables",
    "title": "Stata",
    "section": "Inference without survey design variables",
    "text": "Inference without survey design variables\nExample: count and proportion of the regional population of the UK using Quarterly Labour Force Survey safeguarded data\nAs a rule, safeguarded versions of the LFS do not include sample design variables. On the other hand they include two weight variables:\n\npwt22 for estimation with the whole sample\npiwt22 for estimation of income using respondents currently in employment (and accounting for the high level of non response for the earnings variables)\n\nEstimation without accounting for sample design will likely be biased and should be reported as such including warnings, even if the nature (over or underestimation of the precision) and and size are not known. An alternative is to look for design effects tables published by the data producer which could be used to correct for the bias.\nThe Office for National Statistics regularly publishes such tables for the LFS, albeit mostly for their headline statistics. Obtaining further design effects for subpopulations might not be straighforward. The overall methodology is described in this note, and updated tables are provided on this page.\nLet’s see how this can be achieved. But first, let’s produce uncorrected ‘naive’ estimates of the regional population.\n\nclear \nuse ~/Data/lfs/UKDA-8999-stata/lfsp_aj22_eul_pwt22.dta\n\nsvyset [pw=PIWT22] \n\n*** Counts the number of valid cases for the SEX variable\nsvy:total SEX, over(URESMC)\n\n\n. clear \n\n. use ~/Data/lfs/UKDA-8999-stata/lfsp_aj22_eul_pwt22.dta\n\n. \n. svyset [pw=PIWT22] \n\nSampling weights: PIWT22\n             VCE: linearized\n     Single unit: missing\n        Strata 1: &lt;one&gt;\n Sampling unit 1: &lt;observations&gt;\n           FPC 1: &lt;zero&gt;\n\n. \n. *** Counts the number of valid cases for the SEX variable\n. svy:total SEX, over(URESMC)\n(running total on estimation sample)\n\nSurvey: Total estimation\n\nNumber of strata =      1                        Number of obs   =     75,992\nNumber of PSUs   = 75,992                        Population size = 28,327,129\n                                                 Design df       =     75,991\n\n-----------------------------------------------------------------------------\n                            |             Linearized\n                            |      Total   std. err.     [95% conf. interval]\n----------------------------+------------------------------------------------\n               c.SEX@URESMC |\n               Tyne & Wear  |     711226   70420.39      573202.4    849249.6\n   Rest of Northern region  |    1138483   74814.36      991847.2     1285119\n           South Yorkshire  |     674216   65640.17      545561.6    802870.4\n            West Yorkshire  |    1514892   97543.74       1323707     1706077\nRest of Yorks & Humberside  |    1203435   84752.98       1037320     1369550\n             East Midlands  |    3084354   139855.5       2810238     3358470\n               East Anglia  |    1737856   108910.1       1524393     1951319\n              Inner London  |    2486698   217962.9       2059492     2913904\n              Outer London  |    3425496   199794.6       3033900     3817092\n        Rest of South East  |    8146349   266897.6       7623231     8669467\n                South West  |    3529068   153618.8       3227976     3830160\nWest Midlands (met county)  |    1628710   136654.7       1360868     1896552\n     Rest of West Midlands  |    2096013   127469.1       1846174     2345852\n        Greater Manchester  |    1759917   118336.3       1527978     1991856\n                Merseyside  |     942263     112404      721951.8     1162574\n        Rest of North West  |    1585060   108062.8       1373257     1796863\n                     Wales  |    1865801   121156.4       1628335     2103267\n               Strathclyde  |    1329341   114407.4       1105103     1553579\n          Rest of Scotland  |    2344507   155628.7       2039476     2649538\n          Northern Ireland  |    1119091   44878.71       1031129     1207053\n-----------------------------------------------------------------------------\n\n. \n\n\nIn the above example, we are working with the most commonly used flavour of the Labour Force Survey: the quarterly edition. The specific dataset used above is the April-July 2022 issue. Looking at the latest version of the documentation mentioned above - Volume 1, Annex C, we can see a list of design effects for the number of employed respondents by Region of Usual Residence.\n\n\n\nLFS design factors\n\n\nWe can see that for some reason, the number of regions has been reduced from the original 16 to 13. We therefore need to recode our original variable.\n\n*** Recoding\nrecode URESMC 1 2=1 3 4 5 =2 8 9=8 12 13 =12 14 16 =14 18 19=18,gen(rURESMC)\n\n*** Adapting values labels\nlab copy URESMC ur2\nlab def ur2 1 \"North East\" 2 \"Yorkshire & Humber\" 8 \"London\" 12 \"West Midlands\" 14 \"North West\" 18 \"Scotland\",modify\nlab val  rURESMC ur2\n\n*** Checking the results\ntab rURESMC\n\n\n. *** Recoding\n. recode URESMC 1 2=1 3 4 5 =2 8 9=8 12 13 =12 14 16 =14 18 19=18,gen(rURESMC)\n(23,406 differences between URESMC and rURESMC)\n\n. \n. *** Adapting values labels\n. lab copy URESMC ur2\n\n. lab def ur2 1 \"North East\" 2 \"Yorkshire & Humber\" 8 \"London\" 12 \"West Midland\n&gt; s\" 14 \"North West\" 18 \"Scotland\",modify\n\n. lab val  rURESMC ur2\n\n. \n. *** Checking the results\n. tab rURESMC\n\n  RECODE of URESMC (Region |\n       of usual residence) |      Freq.     Percent        Cum.\n---------------------------+-----------------------------------\n                North East |      4,249        5.59        5.59\n        Yorkshire & Humber |      6,435        8.47       14.06\n             East Midlands |      5,701        7.50       21.56\n               East Anglia |      3,114        4.10       25.66\n                    London |      6,523        8.58       34.24\n        Rest of South East |     13,725       18.06       52.30\n                South West |      7,237        9.52       61.83\n             West Midlands |      6,089        8.01       69.84\n                North West |      5,501        7.24       77.08\n                Merseyside |        993        1.31       78.39\n                     Wales |      3,750        4.93       83.32\n                  Scotland |      5,626        7.40       90.72\n          Northern Ireland |      7,049        9.28      100.00\n---------------------------+-----------------------------------\n                     Total |     75,992      100.00\n\n. \n\n\nLet us now produce the updated population estimates:\n\nsvy:total SEX, over(rURESMC)\n\n. svy:total SEX, over(rURESMC)\n(running total on estimation sample)\n\nSurvey: Total estimation\n\nNumber of strata =      1                Number of obs   =     75,992\nNumber of PSUs   = 75,992                Population size = 28,327,129\n                                         Design df       =     75,991\n\n---------------------------------------------------------------------\n                    |             Linearized\n                    |      Total   std. err.     [95% conf. interval]\n--------------------+------------------------------------------------\n      c.SEX@rURESMC |\n        North East  |    1849709   102546.1       1648719     2050699\nYorkshire & Humber  |    3392543   144303.8       3109708     3675378\n     East Midlands  |    3084354   139855.5       2810238     3358470\n       East Anglia  |    1737856   108910.1       1524393     1951319\n            London  |    5912194   294956.8       5334080     6490308\nRest of South East  |    8146349   266897.6       7623231     8669467\n        South West  |    3529068   153618.8       3227976     3830160\n     West Midlands  |    3724723   186419.1       3359342     4090104\n        North West  |    3344977   159817.1       3031736     3658218\n        Merseyside  |     942263     112404      721951.8     1162574\n             Wales  |    1865801   121156.4       1628335     2103267\n          Scotland  |    3673848   192752.3       3296054     4051642\n  Northern Ireland  |    1119091   44878.71       1031129     1207053\n---------------------------------------------------------------------\n\n\nWe can now amend the standard errors and CIs using the design factors from the LFS documentation. This has to be done by hand, by directly copying the relevant numbers from the LFS documentation.\nFor example, if we wanted to adjust the population estimates for London, we would need to start with the original standard error, multiply it by the relevanmt design effect, then compute the 95% confidence interval of the point estimate. The design effect for London is smaller than 1, which indicates that the confidence interval after correction will be narrower - more precise than when simple random sampling was assumed.\nHere is the adjusted standard error for London:\n\ndis 294956.8*0.9634\n\n. dis 294956.8*0.9634\n284161.38\n\n\n… The corresponding lower bound of the confidence interval\n\ndis 5912194-1.96*(294956.8*0.9634)\n\n. dis 5912194-1.96*(294956.8*0.9634)\n5355237.7\n\n\n… And the upper bound\n\ndis 5912194+1.96*(294956.8*0.9634)\n\n. dis 5912194+1.96*(294956.8*0.9634)\n6469150.3\n\n\n… Instead of the original one:\n[5334080 -6490308]\nWe can see that it is indeed narrower.\nNote: it would be possible to produce an amended table in full, using Stata’s MATA functions.\n\nmat input deff= (0.8712,1.0857,1.3655,1.0051,0.9634,1.0382,0.8936,1.3272,0.9677,0.9137, 1.0012,1.0437,0.7113)\n\nmat orig= e(b)',r(table)[\"se\",.]',deff',hadamard(r(table)[\"se\",.],deff)'\n\n*mat ciL = test[.,\"total\"]-(1.96*tot$SE*tot$deft)\n*tot[\"97.5%\"]&lt;-tot$total+(1.96*tot$SE*tot$deft)\n*rownames(tot)&lt;-substr(rownames(tot),10,nchar(rownames(tot)))\n*kable(round(tot[,c(\"2.5%\",\"97.5%\")]))\n\n\n. mat input deff= (0.8712,1.0857,1.3655,1.0051,0.9634,1.0382,0.8936,1.3272,0.96\n&gt; 77,0.9137, 1.0012,1.0437,0.7113)\n\n. \n. mat orig= e(b)',r(table)[\"se\",.]',deff',hadamard(r(table)[\"se\",.],deff)'\n\n. \n. *mat ciL = test[.,\"total\"]-(1.96*tot$SE*tot$deft)\n. *tot[\"97.5%\"]&lt;-tot$total+(1.96*tot$SE*tot$deft)\n. *rownames(tot)&lt;-substr(rownames(tot),10,nchar(rownames(tot)))\n. *kable(round(tot[,c(\"2.5%\",\"97.5%\")]))\n. \n\n\n\n\n\n\nBlair, Johnny. 2014. Designing Surveys : A Guide to Decisions and Procedures. 3rd edition / Johnny Blair, Ronald F. Czaja, Edward A. Blair. Los Angeles: SAGE.\n\n\nDWP. 2014. “Uncertainty in Family Resources Survey-Based Analysis. Guidance on Estimating Uncertainty in Family Resources Survey-Based Analysis.” Edited by Department for Work and Pensions. 2014. https://www.gov.uk/government/publications/uncertainty-in-family-resources-survey-based-analysis.\n\n\nIBM Support. 2020. “Inconsistency in the Output When Using Weighting Procedure. IBM Support Document Number 419449.” 2020. https://www.ibm.com/support/pages/inconsistency-output-when-using-weighting-procedure.\n\n\nKish, Leslie. 1995. Survey Sampling. Wiley Classics Library. New York: Wiley.\n\n\nLohr, Sharon L. 2019 - 2010. Sampling : Design and Analysis. Second edition. Texts in Statistical Science. Boca Raton, FL: CRC Press.\n\n\nLumley, Thomas. 2023. “Survey: Analysis of Complex Survey Samples.”\n\n\nONS. 2022. “Family Resources Survey, 2020/21 Methodology and Standard Error Tables.” Edited by Office for National Statistics. 2022. https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/1065513/Ch1_Methodology_and_Standard_Errors.ods.\n\n\nP, Curran. 2016. “Complex Survey Designs and Weighting Using Stata: Part 1-3.” 2016. https://www.youtube.com/watch?v=oOpJdC_oeKY.\n\n\nUKDS. 2018. “Data Skills Modules: Applying Weights to Survey Data.” Edited by UK Data Service. 2018. https://www.youtube.com/watch?v=TIad5__WP8g.\n\n\n———. 2019. “Weights in Social Surveys: An Introduction:” Edited by UK Data Service. 2019. https://www.youtube.com/watch?v=Vllr4olp3N4&t=39s.\n\n\nWallrich, Lukas. 2019. “Week 7 Using Survey Weights in r.” Edited by Goldsmiths Core Quantitative Methods Series. 2019. https://www.youtube.com/watch?v=brxx81U6N1o.",
    "crumbs": [
      "5. Exercises",
      "Stata"
    ]
  },
  {
    "objectID": "09_References.html",
    "href": "09_References.html",
    "title": "References",
    "section": "",
    "text": "Blair, Johnny. 2014. Designing Surveys : A Guide to Decisions and\nProcedures. 3rd edition / Johnny Blair, Ronald F. Czaja, Edward A.\nBlair. Los Angeles: SAGE.\n\n\nDWP. 2014. “Uncertainty in Family Resources Survey-Based Analysis.\nGuidance on Estimating Uncertainty in Family Resources Survey-Based\nAnalysis.” Edited by Department for Work and Pensions. 2014. https://www.gov.uk/government/publications/uncertainty-in-family-resources-survey-based-analysis.\n\n\nIBM Support. 2020. “Inconsistency in the Output When Using\nWeighting Procedure. IBM Support Document Number 419449.” 2020.\nhttps://www.ibm.com/support/pages/inconsistency-output-when-using-weighting-procedure.\n\n\nKish, Leslie. 1995. Survey Sampling. Wiley Classics Library.\nNew York: Wiley.\n\n\nLohr, Sharon L. 2019 - 2010. Sampling : Design and Analysis.\nSecond edition. Texts in Statistical Science. Boca Raton, FL: CRC Press.\n\n\nLumley, Thomas. 2023. “Survey: Analysis of Complex Survey\nSamples.”\n\n\nONS. 2022. “Family Resources Survey, 2020/21 Methodology and\nStandard Error Tables.” Edited by Office for National Statistics.\n2022. https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/1065513/Ch1_Methodology_and_Standard_Errors.ods.\n\n\nP, Curran. 2016. “Complex Survey Designs and Weighting Using\nStata: Part 1-3.” 2016. https://www.youtube.com/watch?v=oOpJdC_oeKY.\n\n\nUKDS. 2018. “Data Skills Modules: Applying Weights to Survey\nData.” Edited by UK Data Service. 2018. https://www.youtube.com/watch?v=TIad5__WP8g.\n\n\n———. 2019. “Weights in Social Surveys: An Introduction:”\nEdited by UK Data Service. 2019. https://www.youtube.com/watch?v=Vllr4olp3N4&t=39s.\n\n\nWallrich, Lukas. 2019. “Week 7 Using Survey Weights in r.”\nEdited by Goldsmiths Core Quantitative Methods Series. 2019. https://www.youtube.com/watch?v=brxx81U6N1o.",
    "crumbs": [
      "References"
    ]
  },
  {
    "objectID": "08_Appendix.html",
    "href": "08_Appendix.html",
    "title": "Appendix: Study-specific weighting and sample design information",
    "section": "",
    "text": "British Social Attitudes Survey\nThe BSA is a three stage stratified random survey, with postcode sectors, addresses and individuals as the units selected at each stage. Primary sampling units were furthermore stratified according to geographies (sub regions), population density, and proportion of owner-occupiers. Sampling rate was proportional to the size of postcode sectors (i.e. number of addresses). Some issues of the BSA such as the 2017 include survey design information. The 2017 issue included  Weights are called WtFactor.",
    "crumbs": [
      "Appendix: Study-specific weighting and sample design information"
    ]
  },
  {
    "objectID": "08_Appendix.html#labour-force-survey",
    "href": "08_Appendix.html#labour-force-survey",
    "title": "Appendix: Study-specific weighting and sample design information",
    "section": "Labour Force Survey",
    "text": "Labour Force Survey\nThe LFS is a geographically stratified random survey. For the main part Primary sampling units are addresses within postcode sectors, drawn from the Small Users Postcode Address File (PAF). The small users PAF is limited to addresses which receive, fewer than 50 items of post per day. In a small number of cases a second stage sampling occurs where several households exist at a given address. A clustering effect is also present to the extent that units of observations are individuals within households, and that some groups are clustered within these, typically ethnicity. LFS weights (all of these include a grossing component that enables estimation of population counts):\n\nPWTxx – person level sampling weight;\nPIWTxx - person-level sampling weight for income analysis (i.e. subsample of people in paid work)\nPHHWTxx - Household-level sampling weight (for household-level analysis)",
    "crumbs": [
      "Appendix: Study-specific weighting and sample design information"
    ]
  },
  {
    "objectID": "08_Appendix.html#family-resources-survey",
    "href": "08_Appendix.html#family-resources-survey",
    "title": "Appendix: Study-specific weighting and sample design information",
    "section": "Family Resources Survey",
    "text": "Family Resources Survey\nThe FRS is a stratified clustered random survey, with survey design differing slightly between countries of the UK. In Great Britain, Primary sampling units are postcode sectors, drawn from the Small Users Postcode Address File (PAF). Before being selected, PSUs are stratified according to geography, proportion of household reference persons from higher social classes in the area, proportion of economically active respondents in the area, and proportion of economically active men who are unemployed. In Northern Ireland, the sample is a systematic random sample of addresses.\nInformation about Design Effects in the Family Resources Survey series is available here\nFRS weights: GROSS4: person-level sampling weight; enables inferring population counts\n\n\n\n\nBlair, Johnny. 2014. Designing Surveys : A Guide to Decisions and Procedures. 3rd edition / Johnny Blair, Ronald F. Czaja, Edward A. Blair. Los Angeles: SAGE.\n\n\nDWP. 2014. “Uncertainty in Family Resources Survey-Based Analysis. Guidance on Estimating Uncertainty in Family Resources Survey-Based Analysis.” Edited by Department for Work and Pensions. 2014. https://www.gov.uk/government/publications/uncertainty-in-family-resources-survey-based-analysis.\n\n\nIBM Support. 2020. “Inconsistency in the Output When Using Weighting Procedure. IBM Support Document Number 419449.” 2020. https://www.ibm.com/support/pages/inconsistency-output-when-using-weighting-procedure.\n\n\nKish, Leslie. 1995. Survey Sampling. Wiley Classics Library. New York: Wiley.\n\n\nLohr, Sharon L. 2019 - 2010. Sampling : Design and Analysis. Second edition. Texts in Statistical Science. Boca Raton, FL: CRC Press.\n\n\nLumley, Thomas. 2023. “Survey: Analysis of Complex Survey Samples.”\n\n\nONS. 2022. “Family Resources Survey, 2020/21 Methodology and Standard Error Tables.” Edited by Office for National Statistics. 2022. https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/1065513/Ch1_Methodology_and_Standard_Errors.ods.\n\n\nP, Curran. 2016. “Complex Survey Designs and Weighting Using Stata: Part 1-3.” 2016. https://www.youtube.com/watch?v=oOpJdC_oeKY.\n\n\nUKDS. 2018. “Data Skills Modules: Applying Weights to Survey Data.” Edited by UK Data Service. 2018. https://www.youtube.com/watch?v=TIad5__WP8g.\n\n\n———. 2019. “Weights in Social Surveys: An Introduction:” Edited by UK Data Service. 2019. https://www.youtube.com/watch?v=Vllr4olp3N4&t=39s.\n\n\nWallrich, Lukas. 2019. “Week 7 Using Survey Weights in r.” Edited by Goldsmiths Core Quantitative Methods Series. 2019. https://www.youtube.com/watch?v=brxx81U6N1o.",
    "crumbs": [
      "Appendix: Study-specific weighting and sample design information"
    ]
  }
]